(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{177:function(e,t,n){e.exports=n.p+"static/media/DukeBasketballLogoSpace.2ce598c8.png"},243:function(e,t,n){e.exports=n.p+"static/media/coachKLogo.05a5d5ff.png"},248:function(e,t,n){e.exports=n.p+"static/media/tentemoji.b41cdda7.png"},275:function(e,t,n){e.exports=n.p+"static/media/DukeBasketballLogo.52f6c490.png"},357:function(e,t,n){e.exports=n.p+"static/media/kvilleBoundary.43414a24.jpg"},358:function(e,t,n){e.exports=n.p+"static/media/kvillesign.fc81b6fa.jpg"},365:function(e,t,n){"use strict";n.d(t,"a",(function(){return Jn}));var r=n(11),o=n.n(r),a=n(10),i=n.n(a),c=(n(152),n(0)),s=n(574),l=n(576),u=n(277),d=n(46),h=n(14),b=n(273),j=n(52),f=n(250),g=n(117),m=n(255),x=n(368),p=n(22),y=(n(84),n(103),n(2)),O=n(66),w=n(12),v=n(7),C=n(28),S=n(34),T=n(47),k=n(107),I=n(32),R={background:"#F2F2F7",primary:"#00539B",primaryContainer:"#F2F2F7",secondary:"#1E3F66",tertiary:"#2E5984",quaternary:"#0FA4DC",white1:"#FFFAFACC",white2:"#f6f6f6",grey1:"#3a3b3c",grey2:"#656565",grey3:"#e5e5e5",grey4:"#555555",grey5:"#8E8E93",grey6:"#a9a9a9",popOutBorder:"#d8d9dc",greyModal:"#565656",text1:"#fff",text2:"#000",icon1:"#fff",icon2:"#000",error:"#E01805"},P={roundness:5},B=n(1),z=Object(c.createContext)(),D=function(){return Object(c.useContext)(z)},W=function(e){var t=e.children,n=Object(c.useState)(R),r=o()(n,2),a=r[0];r[1];return Object(B.jsx)(z.Provider,{value:{theme:a,generalTheme:P},children:t})},A=n(171),E=Object(A.b)({name:"snackbar",initialState:{snackbarOpen:!1,snackbarMessage:""},reducers:{toggleSnackBar:function(e){e.snackbarOpen=!e.snackbarOpen},setSnackMessage:function(e,t){e.snackbarMessage=t.payload}}}),N=E.actions,M=N.toggleSnackBar,V=N.setSnackMessage,U=E.reducer,L=n(177),H=n.n(L),G=S.a.get("window");function F(e){var t=Object(c.useState)(""),n=o()(t,2),r=n[0],a=n[1],i=Object(c.useState)(""),s=o()(i,2),l=s[0],u=s[1],h=Object(c.useState)(""),b=o()(h,2),j=b[0],f=b[1],g=Object(c.useState)([]),m=o()(g,2),x=m[0],v=(m[1],Object(c.useState)(!0)),R=o()(v,2),P=R[0],z=R[1],W=Object(c.useState)({window:G}),A=o()(W,2),E=A[0],N=A[1],U=D().theme,L=Object(d.b)();return Object(c.useEffect)((function(){var e=S.a.addEventListener("change",(function(e){var t=e.window;N({window:t})}));return function(){return null==e?void 0:e.remove()}})),Object(B.jsxs)(y.a,{style:_(U).container,children:[Object(B.jsxs)(k.a,{behavior:"padding",style:_(U).container,children:[Object(B.jsxs)(y.a,{style:_(U).banner,children:[Object(B.jsx)(w.a,{style:{color:U.white2,fontSize:35,marginTop:50},children:"REGISTER"}),Object(B.jsxs)(y.a,{style:_(U).imageContainer,children:[Object(B.jsx)(T.a,{style:[_(U).logo,{flex:1,tintColor:"#D9D9D9",opacity:.2,aspectRatio:.84,width:50,top:-30,resizeMode:"repeat"}],source:H.a}),Object(B.jsx)(y.a,{style:_(U).boldImage,children:Object(B.jsx)(T.a,{style:_(U).logo,source:H.a})})]}),Object(B.jsx)(y.a,{style:[_(U).slant,{borderRightWidth:E.window.width,borderTopWidth:E.window.height/5}]})]}),Object(B.jsxs)(y.a,{style:_(U).formCenter,children:[Object(B.jsxs)(y.a,{style:_(U).section,children:[Object(B.jsx)(y.a,{style:_(U).icon,children:Object(B.jsx)(I.default,{name:"account-circle-outline",color:U.icon2,size:25})}),Object(B.jsx)(O.a,{style:_(U).textInput,placeholder:"Username",value:j,onChangeText:function(e){return f(e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"").replace(/[^a-z0-9]/gi,""))}})]}),Object(B.jsxs)(y.a,{style:_(U).section,children:[Object(B.jsx)(y.a,{style:_(U).icon,children:Object(B.jsx)(I.default,{name:"email-outline",color:U.icon2,size:25})}),Object(B.jsx)(O.a,{style:_(U).textInput,placeholder:"Email",value:r,keyboardType:"email-address",onChangeText:function(e){return a(e)}})]}),Object(B.jsxs)(y.a,{style:_(U).section,children:[Object(B.jsx)(y.a,{style:_(U).icon,children:Object(B.jsx)(I.default,{name:"lock-outline",color:U.icon2,size:25})}),Object(B.jsx)(O.a,{style:_(U).textInput,placeholder:"Password",value:l,secureTextEntry:P,onChangeText:function(e){return u(e)}}),Object(B.jsx)(C.a,{style:{marginRight:10},onPress:function(){return z(!P),!1},children:Object(B.jsx)(I.default,{name:P?"eye-off-outline":"eye-outline",color:U.icon2,size:20})})]}),Object(B.jsx)(C.a,{style:_(U).button,onPress:function(){return 0==j.length||0==r.length||0==l.length?(L(V("Please fill out everything")),void L(M())):l.length<6?(L(V("Passwords must be at least 6 characters")),void L(M())):void p.a.firestore().collection("users").where("username","==",j).get().then((function(e){e.empty?p.a.auth().createUserWithEmailAndPassword(r,l).then((function(){p.a.firestore().collection("users").doc(p.a.auth().currentUser.uid).set({email:r,username:j,groupCode:x}).catch((function(e){}))})).catch((function(e){L(V("The email address is already in use by another account")),L(M())})):(L(V("Username Taken")),L(M()))})).catch((function(e){L(V("Something went wrong")),L(M())}))},children:Object(B.jsx)(w.a,{style:{color:U.text1},children:"Register"})})]})]}),Object(B.jsxs)(y.a,{style:_(U).bottomButton,children:[Object(B.jsx)(w.a,{children:"Already have an account? "}),Object(B.jsx)(w.a,{style:{textAlign:"center",color:U.quaternary},onPress:function(){return e.navigation.navigate("Login")},children:"Sign In"})]})]})}var _=function(e){return v.a.create({container:{flex:1,backgroundColor:e.white2},banner:{backgroundColor:e.primary,width:"100%",height:"50%",alignItems:"center"},imageContainer:{position:"absolute",bottom:0,left:30,backgroundColor:"transparent",width:90,height:"100%",alignItems:"center",zIndex:2,margin:0},boldImage:{position:"absolute",bottom:0,backgroundColor:e.white2,borderRadius:15,width:90,height:70,justifyContent:"center",alignItems:"center",zIndex:2},logo:{height:60,width:60,resizeMode:"contain"},slant:{position:"absolute",bottom:0,zIndex:1,marginLeft:0,height:0,width:0,borderStyle:"solid",borderTopWidth:150,borderRightColor:e.white2,borderBottomColor:e.white2,borderTopColor:"transparent"},formCenter:{justifyContent:"start",alignContent:"center",flex:1,margin:25},section:{flexDirection:"row",alignItems:"center",backgroundColor:e.white2,height:40,borderRadius:20,margin:10,shadowColor:e.primary,elevation:20,shadowOffset:{width:0,height:4},shadowOpacity:.3,shadowRadius:7},icon:{position:"absolute",left:-10,height:50,width:50,borderRadius:100,alignItems:"center",justifyContent:"center",backgroundColor:e.white2,shadowColor:e.primary,elevation:20,shadowOffset:{width:0,height:4},shadowOpacity:.3,shadowRadius:7},textInput:{marginLeft:50,flexDirection:"row",flex:1,backgroundColor:e.white2,padding:10,borderRadius:20,height:"100%"},button:{alignItems:"center",justifyContent:"center",flexDirection:"row",width:"100%",backgroundColor:e.primary,height:30,marginTop:40,borderRadius:50},bottomButton:{flexDirection:"row",alignContent:"center",justifyContent:"center",borderTopColor:"gray",borderTopWidth:1,padding:10,textAlign:"center",marginBottom:60}})},Q=n(90),q=S.a.get("window");function J(e){var t=Object(c.useState)(""),n=o()(t,2),r=n[0],a=n[1],s=Object(c.useState)(""),l=o()(s,2),u=l[0],h=l[1],b=Object(c.useState)(!0),j=o()(b,2),f=j[0],g=j[1],m=Object(c.useState)(!1),x=o()(m,2),v=x[0],S=x[1],R=D().theme,P=Object(d.b)();return Object(c.useEffect)((function(){var e=!0;return e&&function(){var e,t;i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(Q.a.getItem("USER_EMAIL"));case 2:return e=n.sent,n.next=5,i.a.awrap(Q.a.getItem("USER_PASSWORD"));case 5:t=n.sent,e&&t?p.a.auth().signInWithEmailAndPassword(e,t).then((function(){})).catch((function(e){})):S(!0);case 7:case"end":return n.stop()}}),null,null,null,Promise)}(),function(){return e=!1}})),v?Object(B.jsxs)(y.a,{style:K(R).container,children:[Object(B.jsxs)(k.a,{behavior:"padding",style:K(R).container,children:[Object(B.jsxs)(y.a,{style:K(R).banner,children:[Object(B.jsx)(w.a,{style:{color:R.white2,fontSize:35,marginTop:50},children:"LOGIN"}),Object(B.jsxs)(y.a,{style:K(R).imageContainer,children:[Object(B.jsx)(T.a,{style:[K(R).logo,{flex:1,tintColor:"#D9D9D9",opacity:.2,aspectRatio:.84,width:50,top:-30,resizeMode:"repeat"}],resizeMode:"repeat",source:H.a}),Object(B.jsx)(y.a,{style:K(R).boldImage,children:Object(B.jsx)(T.a,{style:K(R).logo,source:H.a})})]}),Object(B.jsx)(y.a,{style:[K(R).slant,{borderRightWidth:q.width,borderTopWidth:q.height/5}]})]}),Object(B.jsxs)(y.a,{style:K(R).formCenter,children:[Object(B.jsxs)(y.a,{style:K(R).section,children:[Object(B.jsx)(y.a,{style:K(R).icon,children:Object(B.jsx)(I.default,{name:"account-circle-outline",color:R.icon2,size:25})}),Object(B.jsx)(O.a,{style:K(R).textInput,placeholder:"Email",value:r,onChangeText:function(e){return a(e)},keyboardType:"email-address"})]}),Object(B.jsxs)(y.a,{style:K(R).section,children:[Object(B.jsx)(y.a,{style:K(R).icon,children:Object(B.jsx)(I.default,{name:"lock-outline",color:R.icon2,size:25})}),Object(B.jsx)(O.a,{style:K(R).textInput,placeholder:"Password",secureTextEntry:f,value:u,onChangeText:function(e){return h(e)}}),Object(B.jsx)(C.a,{style:{marginRight:10},onPress:function(){return g(!f),!1},children:Object(B.jsx)(I.default,{name:f?"eye-off-outline":"eye-outline",color:R.icon2,size:20})})]}),Object(B.jsx)(C.a,{style:K(R).button,onPress:function(){p.a.auth().signInWithEmailAndPassword(r,u).then((function(){Q.a.setItem("USER_EMAIL",r),Q.a.setItem("USER_PASSWORD",u)})).catch((function(e){var t="Login unsuccessful";e.message.includes("The email address is badly formatted")&&(t="Not a valid email"),e.message.includes("There is no user record")&&(t="Account does not exist"),e.message.includes("The password is invalid")&&(t="Incorrect password"),P(V(t)),P(M())}))},children:Object(B.jsx)(w.a,{style:{color:R.text1},children:"Sign In"})})]})]}),Object(B.jsxs)(y.a,{style:K(R).bottomButton,children:[Object(B.jsxs)(y.a,{style:{flexDirection:"row",alignContent:"center",justifyContent:"center"},children:[Object(B.jsx)(w.a,{children:"Don't have an account? "}),Object(B.jsx)(w.a,{title:"Register",onPress:function(){return e.navigation.navigate("Register")},style:{textAlign:"center",color:R.quaternary},children:"Sign Up"})]}),Object(B.jsx)(y.a,{style:{width:"100%",justifyContent:"center",alignItems:"center"},children:Object(B.jsx)(w.a,{style:{margin:10,color:R.quaternary,textAlign:"center"},onPress:function(){return e.navigation.navigate("ForgotPassword")},children:"Forgot Password?"})})]})]}):null}var K=function(e){return v.a.create({container:{flex:1,backgroundColor:e.white2},banner:{backgroundColor:e.primary,width:"100%",height:"50%",alignItems:"center"},imageContainer:{position:"absolute",bottom:0,left:30,backgroundColor:"transparent",width:90,height:"100%",alignItems:"center",zIndex:2,margin:0},boldImage:{position:"absolute",bottom:0,backgroundColor:e.white2,borderRadius:15,width:90,height:70,justifyContent:"center",alignItems:"center",zIndex:2},logo:{height:60,width:60,resizeMode:"contain"},slant:{position:"absolute",bottom:0,zIndex:1,marginLeft:0,height:0,width:0,borderStyle:"solid",borderTopWidth:150,borderRightColor:e.white2,borderBottomColor:e.whit2,borderTopColor:"transparent"},formCenter:{justifyContent:"center",flex:1,margin:25},section:{flexDirection:"row",alignItems:"center",backgroundColor:e.white2,height:40,borderRadius:20,margin:10,shadowColor:e.primary,elevation:20,shadowOffset:{width:0,height:4},shadowOpacity:.3,shadowRadius:7},icon:{position:"absolute",left:-10,height:50,width:50,borderRadius:100,alignItems:"center",justifyContent:"center",backgroundColor:e.white2,shadowColor:e.primary,elevation:20,shadowOffset:{width:0,height:4},shadowOpacity:.3,shadowRadius:7},textInput:{marginLeft:50,flexDirection:"row",flex:1,backgroundColor:e.white2,padding:10,borderRadius:20,height:"100%"},button:{alignItems:"center",justifyContent:"center",flexDirection:"row",width:"100%",backgroundColor:e.primary,height:30,marginTop:40,borderRadius:50},bottomButton:{alignContent:"center",justifyContent:"center",borderTopColor:"gray",borderTopWidth:1,padding:10,textAlign:"center",marginBottom:30}})},X=n(9),Y=n.n(X),Z=n(70),$=n(575),ee=n(214),te=n(301);function ne(e){var t=e.navigation;return Object(B.jsx)(y.a,{style:{flex:1,justifyContent:"center",alignItems:"center"},children:Object(B.jsx)(C.a,{onPress:function(){return t.goBack()},style:{backgroundColor:"#00f"},children:Object(B.jsx)(w.a,{style:{color:"#fff"},children:"Go Back"})})})}var re=n(60),oe=n(19),ae=n.n(oe),ie=n(140),ce=["toggleModal","buttonAction","body","buttonText","userStyle"];function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){Y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ue=function(e){var t,n,r,o=e.toggleModal,a=e.buttonAction,i=e.body,c=e.buttonText,s=e.userStyle,l=ae()(e,ce),u=D().theme;return"light"==s?(t="#fff",n="92%",r="black"):(t="#565656",n="100%",r="#fff"),Object(B.jsx)(ie.a,le(le({style:de(u).BottomModalView,swipeDirection:["down"],backdropTransitionOutTiming:0,keyboardDismissMode:"on-drag"},l),{},{children:Object(B.jsxs)(y.a,{children:[Object(B.jsxs)(y.a,{style:[de(u).confirmationPop,{backgroundColor:t,opacity:n}],children:[Object(B.jsx)(y.a,{style:{height:"60%",width:"100%",justifyContent:"center",borderBottomWidth:1,borderBottomColor:"#cfcfcf",padding:10},children:Object(B.jsx)(w.a,{style:[de(u).confirmationText,{color:r}],children:i})}),Object(B.jsx)(C.a,{onPress:function(){a(),o()},style:{height:"40%",width:"100%"},children:Object(B.jsx)(y.a,{style:{height:"100%",width:"100%",justifyContent:"center"},children:Object(B.jsx)(w.a,{style:[de(u).confirmationHeader,{color:u.error}],children:c})})})]}),Object(B.jsx)(C.a,{onPress:function(){return o()},style:[de(u).confirmationBottomBtn,{backgroundColor:t,opacity:n}],children:Object(B.jsx)(w.a,{style:[de(u).confirmationHeader,{color:"#1988f8"}],children:"Cancel"})})]})}))},de=function(e){return v.a.create({BottomModalView:{margin:0,justifyContent:"flex-end"},confirmationPop:{width:"95%",height:150,alignSelf:"center",alignItems:"center",justifyContent:"space-evenly",borderRadius:20,margin:15},confirmationHeader:{fontWeight:"600",textAlign:"center",fontSize:23},confirmationText:{textAlign:"center",justifyContent:"center",padding:5},confirmationBottomBtn:{color:e.text1,alignSelf:"center",width:"95%",borderRadius:15,justifyContent:"center",alignItems:"center",height:65,marginBottom:15,shadowColor:"#171717",shadowOffset:{width:0,height:-5},shadowOpacity:.5,shadowRadius:20,elevation:5}})},he=Object(A.b)({name:"user",initialState:{currentUser:null,currGroupCode:"",currGroupName:"",currUserName:"",currTentType:"",currGroupRole:""},reducers:{setCurrentUser:function(e,t){e.currentUser=t.payload},reset:function(e){e.currentUser=null,e.currGroupCode="",e.currGroupName="",e.currUserName="",e.currTentType="",e.currGroupRole=""},setGroupCode:function(e,t){e.currGroupCode=t.payload},setGroupName:function(e,t){e.currGroupName=t.payload},setUserName:function(e,t){e.currUserName=t.payload},setTentType:function(e,t){e.currTentType=t.payload},setGroupRole:function(e,t){e.currGroupRole=t.payload}}}),be=he.actions,je=be.setCurrentUser,fe=be.reset,ge=be.setGroupCode,me=be.setGroupName,xe=be.setUserName,pe=be.setTentType,ye=be.setGroupRole,Oe=he.reducer;function we(e){var t=e.navigation,n=Object(d.c)((function(e){return e.user.currentUser.groupCode})),r=Object(c.useState)(!1),a=o()(r,2),s=a[0],l=a[1],u=D().theme,h=Object(d.b)();function b(){l(!s)}return Object(B.jsxs)(re.a,{style:ve(u).settingsContainer,children:[Object(B.jsxs)(y.a,{style:ve(u).topBanner,children:[Object(B.jsx)(C.a,{onPress:function(){return t.goBack()},children:Object(B.jsx)(w.a,{style:{fontSize:18,fontWeight:"700",color:u.primary},children:"Back"})}),Object(B.jsx)(w.a,{style:[ve(u).headerText,{color:u.text2,alignSelf:"center",fontSize:26}],children:"Settings"})]}),Object(B.jsx)(C.a,{onPress:function(){return t.navigate("AboutScreen")},children:Object(B.jsx)(w.a,{children:"About"})}),Object(B.jsx)(C.a,{onPress:function(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.awrap(Q.a.multiRemove(["USER_EMAIL","USER_PASSWORD","NAVIGATION_STATE_V1"]));case 2:return e.next=4,i.a.awrap(p.a.auth().signOut());case 4:h(fe());case 5:case"end":return e.stop()}}),null,null,null,Promise)},children:Object(B.jsx)(w.a,{children:"Logout"})}),Object(B.jsx)(C.a,{style:ve(u).leaveButton,onPress:b,children:Object(B.jsx)(w.a,{style:{color:u.error,fontSize:20,fontWeight:"500"},children:"Delete Account"})}),Object(B.jsx)(ue,{body:"Are you sure you want to DELETE your account? This will delete any groups you have created and remove you from any groups you have joined.",buttonText:"Delete account",buttonAction:function(){!function(){var e,t;i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(b(),0!=n.length){r.next=14;break}return e=p.a.auth().currentUser,t=p.a.auth.EmailAuthProvider.credential(e.email,"123456"),r.next=6,i.a.awrap(e.reauthenticateWithCredential(t).catch((function(e){})));case 6:return r.next=8,i.a.awrap(Q.a.multiRemove(["USER_EMAIL","USER_PASSWORD","NAVIGATION_STATE_V1"]));case 8:return p.a.firestore().collection("users").doc(p.a.auth().currentUser.uid).delete().catch((function(e){})),r.next=11,i.a.awrap(p.a.auth().currentUser.delete().catch((function(e){})));case 11:h(fe()),r.next=16;break;case 14:h(V("Delete or leave all current groups before deleting account")),h(M());case 16:case"end":return r.stop()}}),null,null,null,Promise)}()},toggleModal:b,isVisible:s,onBackdropPress:function(){return l(!1)},onSwipeComplete:b,userStyle:"light"})]})}var ve=function(e){return v.a.create({settingsContainer:{flexDirection:"column",alignItems:"center",backgroundColor:e.background,width:"100%",height:"100%",borderTopRightRadius:20,borderTopLeftRadius:20},topBanner:{flexDirection:"row",backgroundColor:e.background,alignItems:"center",justifyContent:"space-between",marginBottom:30,width:"100%",paddingVertical:10,borderBottomWidth:.5,borderColor:e.popOutBorder,borderTopRightRadius:20,borderTopLeftRadius:20,paddingHorizontal:20},headerContainer:{flexDirection:"row",width:"90%",justifyContent:"space-between",marginBottom:15},headerText:{fontSize:20,fontWeight:"700",color:e.grey2},modalText:{fontSize:18,fontWeight:"500"},textInput:{backgroundColor:"#fff",paddingVertical:10,paddingHorizontal:15,width:"90%",fontSize:18,fontWeight:"500",textAlign:"left",borderRadius:15,marginBottom:23},tentChangeListItem:{flexDirection:"row",height:"33%",width:"95%",justifyContent:"center",alignSelf:"center",alignItems:"center",borderBottomWidth:1,borderColor:"#cfcfcf"},tentChangeBtn:{flexDirection:"row",width:"90%",height:45,backgroundColor:"#fff",alignItems:"center",justifyContent:"space-between",borderRadius:15,paddingHorizontal:15},BottomModalView:{margin:0,justifyContent:"flex-end"},leaveButton:{backgroundColor:"#fff",borderRadius:15,padding:15,position:"absolute",bottom:"5%",width:"90%",alignItems:"center",borderWidth:.5,borderColor:e.popOutBorder}})},Ce=Object(l.a)();function Se(){return Object(B.jsxs)(Ce.Navigator,{children:[Object(B.jsx)(Ce.Screen,{name:"AccountSettingsScreen",component:we,options:{headerShown:!1}}),Object(B.jsx)(Ce.Screen,{name:"AboutScreen",component:ne,options:{headerShown:!1}})]})}var Te=n(71),ke=n(99),Ie=n(100),Re=n(351),Pe=n(274),Be=n.n(Pe),ze=n(275),De=n.n(ze),We=["#ececec","#dd7e6b","#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#a4c2f4","#fed9c9","#b4a7d6","#d5a6bd","#e69138","#6aa84f"];function Ae(e,t){var n,r,o,a,c,s,l,u,d,h,b,j,f,g,m,x;return i.a.async((function(y){for(;;)switch(y.prev=y.next){case 0:x=function(e,t){t.sort((function(e,t){return e.hours-t.hours})),t.sort((function(t,n){return Number(n.availability[e])-Number(t.availability[e])}))},y.t0=t,y.next="Black"===y.t0?4:"Blue"===y.t0?7:10;break;case 4:return n=2,r=10,y.abrupt("break",12);case 7:return n=1,r=6,y.abrupt("break",12);case 10:n=1,r=2;case 12:return o=new Array,a=new Array(336),c=null,s=null,l=[{id:"12345",name:"empty",color:"#ececec",changedHrs:0}],y.next=19,i.a.awrap(p.a.firestore().collection("groups").doc(e).collection("members").get().then((function(e){e.forEach((function(e){var t=e.data().availability,n=e.data().name,r=e.id,a=new Array(336);a.fill(!1);var i={id:r,name:n,color:"",changedHrs:0};l.push(i);var c={name:n,hours:0,availability:t,consecutive:0,id:r,shifts:a};o.push(c)}))})));case 19:if(1!=o.length){y.next=21;break}throw"Not enough members";case 21:u=0;case 22:if(!(u<336)){y.next=42;break}if(u%48!=2){y.next=30;break}for(x(u,o),c.availability[u]&&(d=o.findIndex((function(e){return e==c})),o.splice(d,1),o.unshift(c)),2==n&&s.availability[u]&&(h=o.findIndex((function(e){return e==s})),o.splice(h,1),o.unshift(s)),b=0;b<12;b++)for(j=0;j<r;j++)0==j&&o[0].availability[u]?(a[b+u]=o[0].name,o[0].shifts[b+u]=!0,o[0].hours++):j<o.length&&o[j].availability[u]?(a[b+u]+=" "+o[j].name,o[j].shifts[b+u]=!0,o[j].hours++):a[b+u]+=" empty";return u+=11,y.abrupt("continue",39);case 30:if(!c||!s){y.next=34;break}return c.availability[u]&&c.consecutive<8?(a[u]=c.name,c.shifts[u]=!0,c.hours++,c.consecutive++):(c.consecutive=0,x(u,o),2==n&&o[0]==s?o[1].availability[u]?(a[u]=o[1].name,o[1].shifts[u]=!0,o[1].hours++,c=o[1]):a[u]="empty":o[0].availability[u]?(a[u]=o[0].name,o[0].shifts[u]=!0,o[0].hours++,c=o[0]):a[u]="empty"),2==n&&(s.availability[u]&&s.consecutive<8?(a[u]+=" "+s.name,s.shifts[u]=!0,s.hours++,s.consecutive++):(s.consecutive=0,x(u,o),o[0]==c?o[1].availability[u]?(a[u]+=" "+o[1].name,o[1].shifts[u]=!0,o[1].hours++,s=o[1]):a[u]+=" empty":o[0].availability[u]?(a[u]+=" "+o[0].name,o[0].shifts[u]=!0,o[0].hours++,s=o[0]):a[u]+=" empty")),y.abrupt("continue",39);case 34:x(u,o),o[0].availability[u]?(a[u]=o[0].name,o[0].shifts[u]=!0,o[0].hours++):a[u]="empty",2==n&&(o[1].availability[u]?(a[u]+=" "+o[1].name,o[1].shifts[u]=!0,o[1].hours++):o[1].availability[u]||(a[u]+=" empty")),c=o[0],s=o[1];case 39:u++,y.next=22;break;case 42:for(f=0;f<o.length;f++)0==f?o[0].name+" "+o[0].hours+" | ":o[f].name+" "+o[f].hours+" | ";for(g=0;g<o.length;g++)p.a.firestore().collection("groups").doc(e).collection("members").doc(o[g].id).update({scheduledHrs:o[g].hours/2,shifts:o[g].shifts});for(m=1;m<l.length;m++)l[m].color=We[m];return p.a.firestore().collection("groups").doc(e).update({memberArr:l}),y.abrupt("return",a);case 47:case"end":return y.stop()}}),null,null,null,Promise)}var Ee=n(215);function Ne(){var e=D().theme;return Object(B.jsx)(y.a,{style:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:e.background},children:Object(B.jsx)(Ee.a,{size:"large"})})}function Me(e){var t=e.navigation,n=D().theme;return Object(B.jsxs)(y.a,{style:Ve(n).fill,children:[Object(B.jsxs)(y.a,{children:[Object(B.jsx)(w.a,{style:Ve(n).infoText,children:"Sorry, Looks like an error occured."}),Object(B.jsx)(w.a,{style:Ve(n).infoText,children:"Please return to the home page"})]}),Object(B.jsx)(w.a,{children:"Insert meme"}),Object(B.jsx)(C.a,{style:Ve(n).returnBtn,onPress:function(){return t.navigate("Home")},children:Object(B.jsx)(w.a,{style:{color:"white",fontSize:25,fontWeight:"700"},children:"Return Home"})})]})}var Ve=function(e){return v.a.create({fill:{flex:1,justifyContent:"space-evenly",alignItems:"center"},infoText:{fontSize:20,fontWeight:"600",marginVertical:6},returnBtn:{backgroundColor:e.primary,width:"90%",height:"7%",alignItems:"center",justifyContent:"center",borderRadius:15}})},Ue=["toggleModal","backgroundColor","swipeDown","height","userStyle","cancelButton","children"];function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){Y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ge=function(e){var t,n=e.toggleModal,r=e.backgroundColor,o=e.swipeDown,a=void 0===o||o,i=e.height,c=void 0===i?130:i,s=e.userStyle,l=e.cancelButton,u=void 0!==l&&l,d=e.children,h=ae()(e,Ue),b=D().theme;t="light"==s?"#fff":"#565656",void 0!==r&&(t=r);var j=u?c+110:c+30;return Object(B.jsx)(ie.a,He(He({style:Fe(b).BottomModalView,swipeDirection:a?["down"]:null,backdropTransitionOutTiming:0,keyboardDismissMode:"on-drag"},h),{},{children:Object(B.jsxs)(re.a,{style:{width:"95%",alignSelf:"center",height:j},children:[Object(B.jsx)(y.a,{style:[Fe(b).TopSectionView,{backgroundColor:t,height:c}],children:d}),u?Object(B.jsx)(C.a,{onPress:function(){return n()},style:[Fe(b).CancelBtn,{backgroundColor:t}],children:Object(B.jsx)(w.a,{style:[Fe(b).CancelBtnText,{color:"#1988f8"}],children:"Cancel"})}):null]})}))},Fe=function(e){return v.a.create({BottomModalView:{margin:0,justifyContent:"flex-end"},TopSectionView:{width:"100%",alignSelf:"center",alignItems:"center",justifyContent:"space-evenly",borderRadius:20,margin:15},CancelBtn:{alignSelf:"center",width:"100%",borderRadius:15,justifyContent:"center",alignItems:"center",height:65,marginBottom:15},CancelBtnText:{fontWeight:"700",textAlign:"center",fontSize:24}})};function _e(e){var t=Object(c.useState)(!1),n=o()(t,2),r=n[0],a=n[1];return{isRefetchingByUser:r,refetchByUser:function(){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return a(!0),t.prev=1,t.next=4,i.a.awrap(e());case 4:return t.prev=4,a(!1),t.finish(4);case 7:case"end":return t.stop()}}),null,null,[[1,,4,7]],Promise)}}}function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(n),!0).forEach((function(t){Y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}S.a.get("window");function Je(e){var t=e.navigation,n=Object(c.useState)(!1),r=o()(n,2),a=r[0],s=r[1],l=Object(c.useState)(!1),u=o()(l,2),h=u[0],b=u[1],f=Object(c.useState)(!1),g=o()(f,2),m=g[0],x=g[1],O=Object(c.useState)(!1),v=o()(O,2),S=v[0],k=v[1],R=Object(c.useRef)(Math.round((new Date(2023,1,5).getTime()-Date.now())/1e3)),P=D().theme,z=Object(d.b)();Object(Te.p)(Object(c.useCallback)((function(){var e=!0;return e&&x(!1),function(){e=!1}}),[]));var W=Object(j.d)(["groups",p.a.auth().currentUser.uid],(function(){var e;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(p.a.firestore().collection("users").doc(p.a.auth().currentUser.uid).get().then((function(t){var n=t.data().groupCode;e=n.map((function(e){return{code:e.groupCode,groupName:e.groupName}}))})).catch((function(e){throw e})));case 2:return t.abrupt("return",e);case 3:case"end":return t.stop()}}),null,null,null,Promise)}),{initialData:[],onSuccess:function(){return k(!0)}}),A=W.isLoading,E=W.isError,N=(W.error,W.refetch),M=W.data,V=_e(N),U=V.isRefetchingByUser,L=V.refetchByUser;function H(){s(!a)}var G=function(){return Object(B.jsxs)(y.a,{style:[Ke(P).listItem,Ke(P).shadowProp,{flexDirection:"row",justifyContent:"left",opacity:.5,width:"60%",height:"10%",marginRight:50}],children:[Object(B.jsx)(T.a,{source:De.a,style:Ke(P).image}),Object(B.jsxs)(y.a,{style:{flexDirection:"column",width:"70%",justifyContent:"space-between"},children:[Object(B.jsx)(y.a,{style:{backgroundColor:P.grey5,width:"80%",height:"50%",borderRadius:15}}),Object(B.jsx)(y.a,{style:{backgroundColor:P.grey3,width:"50%",height:"30%",borderRadius:15}})]})]})},F=function(e){var n=e.groupName,r=e.groupCode;return Object(B.jsx)(C.a,{onPress:function(){return function(e,n){var r;return i.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return x(!0),o.next=3,i.a.awrap(p.a.firestore().collection("groups").doc(n).get().then((function(e){z(pe(e.data().tentType))})).catch((function(e){})));case 3:return o.next=5,i.a.awrap(p.a.firestore().collection("groups").doc(n).collection("members").doc(p.a.auth().currentUser.uid).get().then((function(e){r=e.data().groupRole,z(xe(e.data().name)),z(ye(r))})).catch((function(e){})));case 5:z(ge(n)),z(me(e));try{t.navigate("GroupInfo",{groupCode:n,groupName:e,groupRole:r})}catch(a){}case 8:case"end":return o.stop()}}),null,null,null,Promise)}(n,r)},style:[Ke(P).listItem,Ke(P).shadowProp],disabled:m,children:Object(B.jsxs)(y.a,{style:{flexDirection:"row",justifyContent:"left"},children:[Object(B.jsx)(T.a,{source:De.a,style:Ke(P).image}),Object(B.jsxs)(y.a,{style:{flexDirection:"column"},children:[Object(B.jsx)(w.a,{style:[Ke(P).listText,{fontSize:20,color:P.grey1}],children:n}),Object(B.jsx)(w.a,{style:[Ke(P).listText,{color:P.grey4}],children:r})]})]})})};return A||!S?Object(B.jsx)(Ne,{}):E?Object(B.jsx)(Me,{navigation:t}):Object(B.jsxs)(y.a,{style:Ke(P).startContainer,children:[Object(B.jsxs)(y.a,{style:Ke(P).topBanner,children:[Object(B.jsx)(w.a,{style:Ke(P).topText,children:"Welcome to Krzyzewskiville!"}),Object(B.jsx)(te.a,{icon:"cog-outline",color:P.grey1,size:25,onPress:function(){return t.navigate("StackNavigator")},style:{marginRight:0}})]}),Object(B.jsxs)(y.a,{style:{flexDirection:"row",justifyContent:"space-between",width:"90%",alignItems:"center",marginBottom:5},children:[Object(B.jsx)(w.a,{style:Ke(P).groupText,children:"Groups"}),Object(B.jsx)(C.a,{onPress:H,children:Object(B.jsxs)(y.a,{style:{flexDirection:"row",alignItems:"center"},children:[Object(B.jsx)(I.default,{name:"plus-circle-outline",color:P.primary,size:20}),Object(B.jsx)(w.a,{style:[Ke(P).groupText,{fontSize:16,fontWeight:"700",color:P.primary,marginLeft:4}],children:"Add Group"})]})})]}),Object(B.jsx)(re.a,{style:{width:"100%",height:"60%"},children:0==M.length?Object(B.jsxs)(y.a,{style:{flex:1,justifyContent:"start",alignItems:"center",paddingTop:"10%"},children:[Object(B.jsx)(y.a,{style:{position:"absolute",height:80,width:80,transform:[{rotateX:"180deg"},{rotate:"90deg"}],right:"10%",top:"0%"},children:Object(B.jsx)((function(e){return Object(B.jsx)(Be.a,qe(qe({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 700 700"},e),{},{children:Object(B.jsx)(Pe.Path,{fill:"#3a3b3c",d:"M423.06 204.3v-68.762l144.13 109.09-141.49 113.06-1.984-50.91c-86.613-13.223-217.52 31.734-291.57 117.02 37.023-124.3 103.14-223.47 290.91-219.5z",fillRule:"evenodd"})}))}),{})}),Object(B.jsx)(G,{}),Object(B.jsx)(G,{}),Object(B.jsx)(G,{}),Object(B.jsx)(w.a,{style:{color:P.grey1,fontSize:20,fontWeight:"700",marginTop:"10%"},children:"Create or Join a Group"})]}):Object(B.jsx)(Ie.a,{data:M,renderItem:function(e){var t=e.item;return Object(B.jsx)(F,{groupName:t.groupName,groupCode:t.code})},keyExtractor:function(e){return e.code},refreshControl:Object(B.jsx)(ke.a,{enabled:!0,refreshing:U,onRefresh:L}),style:{width:"100%",flexGrow:1,height:"100%"},showsVerticalScrollIndicator:!1})}),Object(B.jsx)(Ge,{isVisible:h,onBackdropPress:function(){b(!h)},swipeDown:!1,height:200,userStyle:"light",children:Object(B.jsxs)(y.a,{style:{justifyContent:"center",alignItems:"center",flex:1,width:"100%"},children:[Object(B.jsx)(w.a,{style:{position:"absolute",top:0},children:"Countdown to UNC"}),Object(B.jsx)(Re.a,{size:30,until:R.current,onFinish:function(){return alert("Finished")},digitStyle:{backgroundColor:"#FFF",borderWidth:2,borderColor:P.primary},digitTxtStyle:{color:P.primary},timeLabelStyle:{color:"black",fontWeight:"bold"},separatorStyle:{color:P.primary,alignSelf:"center",flex:1,paddingTop:15,justifyContent:"center"},showSeparator:!0})]})}),Object(B.jsx)(ie.a,{isVisible:a,onBackdropPress:function(){return s(!1)},backdropTransitionOutTiming:0,keyboardDismissMode:"on-drag",children:Object(B.jsxs)(re.a,{style:Ke(P).popUp,children:[Object(B.jsx)(w.a,{style:Ke(P).popUpHeader,children:"Add Group"}),Object(B.jsx)(C.a,{onPress:function(){H(),t.navigate("JoinGroup")},style:{width:"100%",alignSelf:"center"},children:Object(B.jsxs)(y.a,{style:[Ke(P).popButton,{borderBottomLeftRadius:3,borderBottomRightRadius:3,borderTopLeftRadius:11,borderTopRightRadius:11}],children:[Object(B.jsx)(I.default,{name:"account-plus-outline",color:"white",size:20,style:{marginLeft:10}}),Object(B.jsx)(w.a,{style:Ke(P).buttonText,children:"Join Group"})]})}),Object(B.jsx)(C.a,{onPress:function(){H(),t.navigate("CreateGroup")},style:{width:"100%",alignSelf:"center"},children:Object(B.jsxs)(y.a,{style:[Ke(P).popButton,{borderBottomLeftRadius:11,borderBottomRightRadius:11,borderTopLeftRadius:3,borderTopRightRadius:3}],children:[Object(B.jsx)(I.default,{name:"account-circle-outline",color:"white",size:20,style:{marginLeft:10}}),Object(B.jsx)(w.a,{style:Ke(P).buttonText,children:"Create New Group"})]})})]})})]})}var Ke=function(e){return v.a.create({startContainer:{flexDirection:"column",flex:1,backgroundColor:"#f5f7fa",alignItems:"center",marginTop:"0%"},topBanner:{alignItems:"center",marginTop:50,marginBottom:35,width:"100%",flexDirection:"row",justifyContent:"space-between",paddingHorizontal:"5%"},topText:{textAlign:"left",fontWeight:"800",fontSize:28,color:e.grey1,width:"70%"},groupText:{fontSize:24,fontWeight:"700",color:e.grey1},popUp:{width:"90%",height:160,backgroundColor:e.secondary,alignSelf:"center",alignItems:"center",borderRadius:20,margin:15},popUpHeader:{fontWeight:"600",color:e.text1,height:40,width:"89%",marginTop:15,textAlign:"center",fontSize:24},popButton:{flexDirection:"row",width:"85%",height:40,marginVertical:2,alignSelf:"center",backgroundColor:e.tertiary,justifyContent:"flex-start",alignItems:"center"},buttonText:{fontSize:16,color:e.text1,textAlign:"left",marginLeft:15},image:{width:45,height:39,alignSelf:"center",marginLeft:10,marginRight:20},listItem:{backgroundColor:"#fff",padding:8,marginVertical:7,borderRadius:10,alignSelf:"center",borderWidth:.3,borderColor:"#d8d9dc",width:"90%",justifyContent:"flex-start"},listText:{fontSize:15,fontWeight:"500",color:e.text2},shadowProp:{shadowColor:"#171717",shadowOffset:{width:-2,height:4},shadowOpacity:.2,shadowRadius:5,elevation:20}})};var Xe=function(e){for(var t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVXZ",n=[],r=0;r<e;r++)n.push(t[Math.floor(Math.random()*t.length)]);return n.join("")},Ye=n(243),Ze=n.n(Ye);function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(n),!0).forEach((function(t){Y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tt=new Array(336);tt.fill(!0);var nt=S.a.get("window");function rt(e){var t,n=e.navigation,r=Object(c.useState)({groupName:"",tentType:"",groupCode:"",userName:"",tentType:"Select Tent Type"}),a=o()(r,2),s=a[0],l=a[1],u=Object(c.useState)(!1),h=o()(u,2),b=h[0],f=h[1],g=Object(c.useState)({window:nt}),m=o()(g,2),x=m[0],v=m[1],R=D().theme,P=Object(d.b)(),z=Object(j.e)(),W=p.a.firestore().collection("users").doc(p.a.auth().currentUser.uid),A=Object(d.c)((function(e){return e.user.currentUser.username}));function E(){f(!b)}return Object(c.useEffect)((function(){var e=S.a.addEventListener("change",(function(e){var t=e.window;v({window:t})}));return function(){return null==e?void 0:e.remove()}})),Object(Te.p)(Object(c.useCallback)((function(){var e,t=!0;return t&&l(et(et({},s),{},{groupCode:(e=8,Xe(e)),userName:A})),function(){t=!1}}),[])),Object(B.jsxs)(y.a,{style:{flex:1,backgroundColor:R.background},children:[Object(B.jsx)(re.a,{style:{flex:1},children:Object(B.jsxs)(k.a,{behavior:"padding",style:{flex:1},children:[Object(B.jsxs)(y.a,{style:ot(R).groupContainer,children:[Object(B.jsxs)(y.a,{style:ot(R).groupHeader,children:[Object(B.jsx)(w.a,{style:ot(R).btnTxt,onPress:function(){return n.goBack()},children:"Cancel"}),Object(B.jsx)(w.a,{style:{fontWeight:"500",fontSize:20},children:"Create Group"}),Object(B.jsx)(C.a,{onPress:function(){i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=s.groupName){e.next=4;break}return P(M()),P(V("Enter group name")),e.abrupt("return");case 4:if("Select Tent Type"!=s.tentType){e.next=8;break}return P(M()),P(V("Select tent type")),e.abrupt("return");case 8:if(""!=s.userName){e.next=12;break}return P(M()),P(V("Enter a nickname")),e.abrupt("return");case 12:return(t=p.a.firestore().collection("groups").doc(s.groupCode)).set({name:s.groupName,tentType:s.tentType,groupSchedule:[],memberArr:[],previousSchedule:[],previousMemberArr:[]}).catch((function(e){})),t.collection("members").doc(p.a.auth().currentUser.uid).set({groupRole:"Creator",name:s.userName,inTent:!1,availability:tt,scheduledHrs:0,shifts:[]}).catch((function(e){})),W.update({groupCode:p.a.firestore.FieldValue.arrayUnion({groupCode:s.groupCode,groupName:s.groupName})}).catch((function(e){})),P(ge(s.groupCode)),P(me(s.groupName)),P(xe(s.userName)),P(pe(s.tentType)),P(ye("Creator")),e.next=23,i.a.awrap(W.get().then((function(e){return e.exists&&P(je(e.data())),e})));case 23:z.invalidateQueries(["groups",p.a.auth().currentUser.uid]),n.navigate("GroupInfo",{groupCode:s.groupCode,groupName:s.groupName,groupRole:"Creator"});case 25:case"end":return e.stop()}}),null,null,null,Promise)},children:Object(B.jsx)(w.a,{style:ot(R).btnTxt,children:"Create"})})]}),Object(B.jsx)(y.a,{style:{width:"90%"},children:Object(B.jsx)(w.a,{style:ot(R).headerText,children:"Group Name"})}),Object(B.jsx)(O.a,{style:ot(R).textInput,placeholder:"Enter Group Name",value:s.groupName,maxLength:28,onChangeText:function(e){return l(et(et({},s),{},{groupName:e}))},autoCorrect:!1}),Object(B.jsx)(w.a,{style:[ot(R).headerText,{marginTop:20}],children:"Group Code"}),Object(B.jsx)(y.a,{style:[ot(R).textInput,{backgroundColor:R.background,height:60,width:"90%",justifyContent:"center"}],children:Object(B.jsx)(w.a,{selectable:!0,style:{textAlign:"center",fontSize:26,fontWeight:"700"},children:s.groupCode})}),Object(B.jsx)(w.a,{style:[ot(R).headerText,{marginTop:20}],children:"Tent Type"}),Object(B.jsxs)(C.a,{onPress:E,style:ot(R).selectTent,children:[Object(B.jsx)(w.a,{style:{textAlign:"center",fontSize:20,fontWeight:"400",color:R.grey1},children:s.tentType}),Object(B.jsx)(I.default,{name:"chevron-down",color:R.icon2,size:30,style:{marginLeft:10}})]}),Object(B.jsx)(w.a,{style:[ot(R).headerText,{marginTop:20}],children:"Nickname"}),Object(B.jsx)(O.a,{style:ot(R).textInput,value:s.userName,placeholder:"Enter Nickname",maxLength:11,onChangeText:function(e){return l(et(et({},s),{},{userName:e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"").replace(/[^a-z0-9]/gi,"")}))},clearTextOnFocus:!0})]}),Object(B.jsxs)(Ge,{isVisible:b,onBackdropPress:E,onSwipeComplete:E,toggleModal:E,cancelButton:!0,height:180,userStyle:"light",children:[Object(B.jsx)(C.a,{onPress:function(){l(et(et({},s),{},{tentType:"Black"})),E()},style:ot(R).tentChangeListItem,children:Object(B.jsx)(w.a,{style:ot(R).modalText,children:"Black"})}),Object(B.jsx)(C.a,{onPress:function(){l(et(et({},s),{},{tentType:"Blue"})),E()},style:ot(R).tentChangeListItem,children:Object(B.jsx)(w.a,{style:ot(R).modalText,children:"Blue"})}),Object(B.jsx)(C.a,{onPress:function(){l(et(et({},s),{},{tentType:"White"})),E()},style:[ot(R).tentChangeListItem,{borderBottomWidth:0}],children:Object(B.jsx)(w.a,{style:ot(R).modalText,children:"White"})})]})]})}),Object(B.jsxs)(y.a,{style:{marginTop:"auto",width:"100%"},children:[Object(B.jsx)(y.a,{style:[ot(R).triangle,{borderRightWidth:x.window.width,borderTopWidth:x.window.height/6}]}),Object(B.jsx)(T.a,{source:Ze.a,style:{position:"absolute",marginVertical:10,zIndex:1,height:129,width:113,alignSelf:"center"}}),Object(B.jsx)(y.a,{style:{width:"100%",height:x.window.height/15,backgroundColor:R.primary}})]})]})}var ot=function(e){return v.a.create({groupContainer:{flexDirection:"column",flex:1,alignItems:"center",backgroundColor:e.background},groupHeader:{flexDirection:"row",width:"94%",height:"10%",alignItems:"center",justifyContent:"space-between",marginBottom:20},backgroundImage:{flex:1,alignItems:"center",flexDirection:"column",height:"100%",width:"100%",resizeMode:"cover"},topBanner:{alignItems:"center",justifyContent:"flex-end",flexDirection:"row",marginTop:10,marginBottom:12,width:"90%"},headerText:{textAlign:"left",width:"90%",fontSize:20,marginBottom:10,fontWeight:"700",color:e.grey1},textContainer:{height:"70%",width:"80%",marginVertical:50},text:{color:e.text1,fontSize:22,fontWeight:"700"},centerText:{color:e.text1,fontSize:36,fontWeight:"700",textAlign:"center"},textInput:{backgroundColor:e.background,padding:10,width:"90%",fontSize:20,fontWeight:"400",borderRadius:8,borderColor:e.grey2,borderWidth:2},selectTent:{width:"90%",height:45,borderRadius:8,borderWidth:2,borderColor:e.grey2,backgroundColor:e.background,justifyContent:"center",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:10},tentChangeListItem:{flexDirection:"row",height:"33%",width:"95%",justifyContent:"center",alignSelf:"center",alignItems:"center",borderBottomWidth:1,borderColor:"#cfcfcf"},modalText:{fontSize:18,fontWeight:"500",color:e.text2},picker:{width:"90%",height:"20%"},pickerItem:{height:"100%"},btnTxt:{fontSize:18,color:e.primary,fontWeight:"600"},triangle:{height:0,width:0,borderTopWidth:150,borderRightColor:e.primary,borderTopColor:"transparent",transform:[{scaleX:-1}]}})},at=new Array(336);at.fill(!0);var it=S.a.get("window");function ct(e){var t=e.navigation,n=Object(c.useState)(""),r=o()(n,2),a=r[0],s=r[1],l=Object(c.useState)(""),u=o()(l,2),h=u[0],b=u[1],f=Object(c.useState)({window:it}),g=o()(f,2),m=g[0],x=g[1],v=D().theme,I="",R=Object(j.e)(),P=Object(d.b)(),z=Object(d.c)((function(e){return e.user.currentUser.username}));return Object(c.useEffect)((function(){var e=S.a.addEventListener("change",(function(e){var t=e.window;x({window:t})}));return function(){return null==e?void 0:e.remove()}})),Object(Te.p)(Object(c.useCallback)((function(){var e=!0;return e&&(b(z),s("")),function(){e=!1}}),[])),Object(B.jsxs)(y.a,{style:{flex:1,backgroundColor:v.background},children:[Object(B.jsx)(re.a,{style:{flex:1},children:Object(B.jsx)(k.a,{behavior:"padding",style:{flex:1},children:Object(B.jsxs)(y.a,{style:st(v).container,children:[Object(B.jsxs)(y.a,{style:st(v).header,children:[Object(B.jsx)(w.a,{style:st(v).buttonText,onPress:function(){return t.goBack()},children:"Cancel"}),Object(B.jsx)(w.a,{style:{fontWeight:"500",fontSize:20},children:"Join Group"}),Object(B.jsx)(C.a,{onPress:function(){!function(e){var t,n;i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(""!=a){r.next=4;break}return P(V("Enter group code")),P(M()),r.abrupt("return");case 4:if(""!=h){r.next=8;break}return P(V("Enter a nickname")),P(M()),r.abrupt("return");case 8:return t=p.a.firestore().collection("groups").doc(a),n=p.a.firestore().collection("users").doc(p.a.auth().currentUser.uid),r.next=12,i.a.awrap(t.get().then((function(r){return i.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(!r.exists){o.next=15;break}return o.next=3,i.a.awrap(t.collection("members").get().then((function(e){if(12==e.size)return P(M()),P(V("Group already full")),"full"})));case 3:if("full"!=o.sent){o.next=6;break}return o.abrupt("return");case 6:return o.next=8,i.a.awrap(t.collection("members").doc(p.a.auth().currentUser.uid).get().then((function(e){if(e.exists)return P(V("Already joined this group")),P(M()),"exists"})));case 8:if("exists"!=o.sent){o.next=11;break}return o.abrupt("return");case 11:return t.collection("members").where("name","==",h).get().then((function(o){return i.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(!o.empty){c.next=17;break}return I=r.data().name,P(ge(a)),P(xe(h)),P(me(I)),P(pe(r.data().tentType)),P(ye("Member")),c.next=9,i.a.awrap(n.update({groupCode:p.a.firestore.FieldValue.arrayUnion({groupCode:a,groupName:r.data().name})}));case 9:return c.next=11,i.a.awrap(t.collection("members").doc(p.a.auth().currentUser.uid).set({groupRole:"Member",name:h,inTent:!1,availability:at,scheduledHrs:0,shifts:[]}));case 11:return c.next=13,i.a.awrap(n.get().then((function(e){P(je(e.data()))})));case 13:R.invalidateQueries(["groups",p.a.auth().currentUser.uid]),e.navigate("GroupInfo",{groupCode:a,groupName:I,groupRole:"Member"}),c.next=19;break;case 17:P(M()),P(V("Name already taken"));case 19:case"end":return c.stop()}}),null,null,null,Promise)})),o.abrupt("return");case 15:return P(M()),P(V("Invalid group code: group doesn't exist")),o.abrupt("return");case 18:case"end":return o.stop()}}),null,null,null,Promise)})));case 12:case"end":return r.stop()}}),null,null,null,Promise)}(t)},children:Object(B.jsx)(w.a,{style:st(v).buttonText,children:"Join"})})]}),Object(B.jsx)(y.a,{style:{flexDirection:"row",width:"90%",marginBottom:10},children:Object(B.jsx)(w.a,{style:st(v).groupText,children:"Group Code"})}),Object(B.jsx)(O.a,{style:st(v).textInput,onChangeText:function(e){return s(e.trim())},value:a,placeholder:"Enter Group Code",autoCorrect:!1}),Object(B.jsx)(y.a,{style:{flexDirection:"row",width:"90%",marginBottom:10,marginTop:55},children:Object(B.jsx)(w.a,{style:st(v).groupText,children:"Nickname"})}),Object(B.jsx)(O.a,{style:st(v).textInput,value:h,placeholder:"Enter Nickname",maxLength:11,onChangeText:function(e){return b(e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"").replace(/[^a-z0-9]/gi,""))},clearTextOnFocus:!0,autoCorrect:!1})]})})}),Object(B.jsxs)(y.a,{style:{marginTop:"auto",width:"100%",backgroundColor:v.background},children:[Object(B.jsx)(y.a,{style:[st(v).triangle,{borderRightWidth:m.window.width,borderTopWidth:m.window.height/5}]}),Object(B.jsx)(T.a,{source:Ze.a,style:{position:"absolute",marginVertical:20,zIndex:1,height:161,width:140,alignSelf:"center"}}),Object(B.jsx)(y.a,{style:{width:"100%",height:m.window.height/10,backgroundColor:v.primary}})]})]})}var st=function(e){return v.a.create({container:{flexDirection:"column",flex:1,backgroundColor:e.background,alignItems:"center",marginTop:"0%"},header:{flexDirection:"row",width:"94%",height:"10%",alignItems:"center",justifyContent:"space-between",marginBottom:20},textInput:{backgroundColor:e.background,padding:10,width:"90%",fontSize:20,fontWeight:"500",borderRadius:8,borderColor:e.grey2,borderWidth:2},groupText:{width:"90%",fontSize:20,fontWeight:"700",color:e.grey1},buttonText:{fontSize:18,color:e.primary,fontWeight:"600"},shadowProp:{shadowColor:"#171717",shadowOffset:{width:-2,height:4},shadowOpacity:.2,shadowRadius:5,elevation:20},triangle:{height:0,width:0,borderTopWidth:150,borderRightColor:e.primary,borderTopColor:"transparent",transform:[{scaleX:-1}]}})},lt=n(118),ut=n(220),dt=n(256),ht=n(278),bt=n(369),jt=["height","color","swipeDown","barSize","userStyle","children"];function ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(n),!0).forEach((function(t){Y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mt=Object(c.createContext)();function xt(){var e=Object(c.useContext)(mt);if(!e)throw new Error("useModal must be used in or within a Modal Component");return e}var pt=function(e){var t,n,r=e.height,o=void 0===r?"50%":r,a=e.color,i=e.swipeDown,c=void 0===i||i,s=e.barSize,l=void 0===s?"default":s,u=e.userStyle,d=e.children,h=ae()(e,jt),b=D().theme;return"light"==u?(t=b.background,n="black"):(t="#565656",n="#fff"),void 0!==a&&(t=a),Object(B.jsx)(mt.Provider,{value:{headerColor:n},children:Object(B.jsx)(ie.a,gt(gt({style:yt(b).BottomModalView,swipeDirection:c?"down":null,backdropTransitionOutTiming:0,keyboardDismissMode:"on-drag"},h),{},{children:Object(B.jsxs)(re.a,{style:[yt(b).ModalContainer,{height:o,backgroundColor:t}],children:["default"==l?Object(B.jsx)(y.a,{style:[yt(b).modalBar,{backgroundColor:n}]}):"small"==l?Object(B.jsx)(y.a,{style:[yt(b).modalSmallBar,{backgroundColor:n}]}):null,d]})}))})};pt.SecondContainer=function(e){var t,n,r=e.children,o=e.color,a=e.size;t="default"==(void 0===a?"default":a)?"85%":"70%";var i=D().theme;return n="black"==xt().headerColor?"#f5f5f5":"#757575",void 0!==o&&(n=o),Object(B.jsx)(y.a,{style:[yt(i).ModalSecondaryView,{backgroundColor:n,height:t}],children:r})};pt.Header=function(e){var t=e.children,n=e.verticalMargin,r=void 0===n?10:n,o=e.fontSize,a=void 0===o?20:o,i=D().theme,c=xt().headerColor;return Object(B.jsx)(w.a,{style:[yt(i).ModalHeader,{marginVertical:r,fontSize:a,color:c}],children:t})};var yt=function(e){return v.a.create({BottomModalView:{margin:0,justifyContent:"flex-end"},ModalContainer:{width:"100%",height:"45%",borderTopRightRadius:30,borderTopLeftRadius:30,alignItems:"center",justifyContent:"space-between"},modalSmallBar:{height:2,marginTop:4,width:"15%",borderRadius:25,backgroundColor:"white"},modalBar:{height:4,marginTop:8,width:"22%",borderRadius:25,backgroundColor:"white"},ModalHeader:{fontWeight:"700",color:"white",textAlign:"center",fontSize:20},ModalSecondaryView:{width:"100%",height:"85%",paddingHorizontal:35,paddingVertical:20,borderTopRightRadius:40,borderTopLeftRadius:40,marginBottom:0},ModalText:{color:"white",marginVertical:5,textAlign:"left",fontSize:16}})},Ot=n(308),wt=n(364);function vt(e){var t=e.params,n=e.navigation,r=e.toggleModal,a=t.groupCode,s=t.groupName,l=t.userName,u=t.tentType,h=t.groupRole,b=Object(c.useState)(!1),f=o()(b,2),g=f[0],m=f[1],x=Object(c.useState)(!1),v=o()(x,2),S=v[0],T=v[1],k=Object(c.useState)(!1),R=o()(k,2),P=R[0],z=R[1],W=Object(c.useState)(""),A=o()(W,2),E=A[0],N=A[1],U=Object(d.b)(),L=D().theme,H=Object(j.e)(),G=p.a.firestore().collection("users").doc(p.a.auth().currentUser.uid),F=p.a.firestore().collection("groups").doc(a),_=function(e){return Object(j.c)((function(e){return Q(e)}),{onError:function(e){},onSuccess:function(){H.invalidateQueries(["group",e])}})}(a);function Q(e){var t,n,o,c,d,h;return i.a.async((function(b){for(;;)switch(b.prev=b.next){case 0:if(t=e.newGroupName,n=e.newUserName,o=e.newTentType,h=!0,t==s&&o==u){b.next=10;break}return b.next=5,i.a.awrap(G.get().then((function(e){d=e.data().groupCode,c=d.findIndex((function(e){return e.groupCode==a})),d[c]={groupCode:a,groupName:t}})));case 5:G.update({groupCode:d}).then((function(){})).catch((function(e){N("Error saving group name"),K()})),F.update({name:t,tentType:o}).then((function(){})).catch((function(e){N("Error saving group settings"),K()})),H.invalidateQueries(["groups",p.a.auth().currentUser.uid]),U(pe(o)),U(me(t));case 10:n!=l?F.collection("members").where("name","==",n).get().then((function(e){if(!e.empty)return N("Nickname taken"),K(),void(h=!1);F.collection("members").doc(p.a.auth().currentUser.uid).update({name:n}).then((function(){})).catch((function(e){N("Error saving user name"),K()})),U(xe(n))})).then((function(){h&&(U(M()),U(V("Saved")),r())})):h&&(U(M()),U(V("Saved")),r());case 11:case"end":return b.stop()}}),null,null,null,Promise)}function q(){m(!g)}function J(){T(!S)}function K(){z(!P)}return Object(B.jsxs)(y.a,{style:Ct(L).settingsContainer,children:[Object(B.jsx)(wt.a,{initialValues:{newUserName:l,newGroupName:s,newTentType:u},onSubmit:function(e){return _.mutate(e)},style:{borderWidth:1},children:function(e){var t=e.handleChange,n=e.handleBlur,o=e.handleSubmit,a=e.setFieldValue,i=e.setFieldTouched,c=e.values;return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)(y.a,{style:Ct(L).topBanner,children:[Object(B.jsx)(C.a,{onPress:r,children:Object(B.jsx)(w.a,{style:{fontSize:18,fontWeight:"700",color:L.primary},children:"Cancel"})}),Object(B.jsx)(w.a,{style:[Ct(L).headerText,{color:L.text2,alignSelf:"center",fontSize:26}],children:"Settings"}),Object(B.jsx)(C.a,{onPress:o,children:Object(B.jsx)(w.a,{style:{fontSize:18,fontWeight:"700",color:L.primary},children:"Save"})})]}),Object(B.jsxs)(y.a,{style:Ct(L).headerContainer,children:[Object(B.jsx)(w.a,{style:Ct(L).headerText,children:"Nickname"}),Object(B.jsx)(I.default,{name:"account-edit",color:L.grey2,size:20,style:{marginRight:8}})]}),Object(B.jsx)(O.a,{name:"newUserName",placeholder:"Nickname",style:Ct(L).textInput,onChangeText:t("newUserName"),onBlur:n("newUserName"),value:c.newUserName}),"Creator"===h||"Admin"==h?Object(B.jsxs)(y.a,{style:{width:"100%",alignItems:"center",height:"55%"},children:[Object(B.jsxs)(y.a,{style:Ct(L).headerContainer,children:[Object(B.jsx)(w.a,{style:Ct(L).headerText,children:"Group Name"}),Object(B.jsx)(I.default,{name:"circle-edit-outline",color:L.grey2,size:20,style:{marginRight:8}})]}),Object(B.jsx)(O.a,{name:"newGroupName",placeholder:"Group Name",style:Ct(L).textInput,onChangeText:t("newGroupName"),onBlur:n("newGroupName"),value:c.newGroupName}),Object(B.jsxs)(y.a,{style:Ct(L).headerContainer,children:[Object(B.jsx)(w.a,{style:Ct(L).headerText,children:"Tent Type"}),Object(B.jsx)(I.default,{name:"home-edit",color:L.grey2,size:20,style:{marginRight:8}})]}),Object(B.jsxs)(C.a,{onPress:J,style:Ct(L).tentChangeBtn,children:[Object(B.jsx)(w.a,{style:Ct(L).modalText,children:c.newTentType}),Object(B.jsx)(I.default,{name:"chevron-down",color:L.grey2,size:20})]})]}):null,"Creator"==h||"Admin"==h?Object(B.jsxs)(Ge,{isVisible:S,onBackdropPress:J,onSwipeComplete:J,toggleModal:J,cancelButton:!0,height:180,userStyle:"dark",children:[Object(B.jsx)(C.a,{onPress:function(){a("newTentType","Black"),i("newTentType"),J()},style:Ct(L).tentChangeListItem,children:Object(B.jsx)(w.a,{style:[Ct(L).modalText,{color:L.text1,marginRight:15}],children:"Black"})}),Object(B.jsx)(C.a,{onPress:function(){a("newTentType","Blue"),i("newTentType"),J()},style:Ct(L).tentChangeListItem,children:Object(B.jsx)(w.a,{style:[Ct(L).modalText,{color:L.text1,marginRight:15}],children:"Blue"})}),Object(B.jsx)(C.a,{onPress:function(){a("newTentType","White"),i("newTentType"),J()},style:[Ct(L).tentChangeListItem,{borderBottomWidth:0}],children:Object(B.jsx)(w.a,{style:[Ct(L).modalText,{color:L.text1,marginRight:15}],children:"White"})})]}):null]})}}),Object(B.jsx)(C.a,{style:Ct(L).leaveButton,onPress:q,children:"Creator"===h?Object(B.jsx)(w.a,{style:{color:L.error,fontSize:20,fontWeight:"500"},children:"Delete Group"}):Object(B.jsx)(w.a,{style:{color:L.error,fontSize:20,fontWeight:"500"},children:"Leave Group"})}),Object(B.jsx)(ue,{body:"Creator"===h?"Are you sure you want to DELETE this group? This will delete it for everyone in this group and CANNOT be undone.":"Are you sure you want to LEAVE this group? This will delete all your information in this group and CANNOT be undone.",buttonText:"Creator"===h?"Delete This Group":"Leave This Group",buttonAction:function(){i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if("Creator"!==h){e.next=6;break}return e.next=3,i.a.awrap(F.collection("members").get().then((function(e){e.forEach((function(e){p.a.firestore().collection("users").doc(e.id).update({groupCode:p.a.firestore.FieldValue.arrayRemove({groupCode:a,groupName:s})}).catch((function(e){}))}))})));case 3:F.delete().then((function(){})).catch((function(e){})),e.next=9;break;case 6:return e.next=8,i.a.awrap(G.update({groupCode:p.a.firestore.FieldValue.arrayRemove({groupCode:a,groupName:s})}));case 8:F.collection("members").doc(p.a.auth().currentUser.uid).delete().then((function(){})).catch((function(e){}));case 9:H.invalidateQueries(["groups",p.a.auth().currentUser.uid]);case 10:case"end":return e.stop()}}),null,null,null,Promise),r(),n.navigate("Home")},toggleModal:q,isVisible:g,onBackdropPress:function(){return m(!1)},onSwipeComplete:q,userStyle:"light"}),Object(B.jsx)(Ot.a,{visible:P,onDismiss:function(){return z(!1)},wrapperStyle:{top:0},duration:2e3,children:Object(B.jsx)(w.a,{style:{textAlign:"center",color:L.text1},children:E})})]})}var Ct=function(e){return v.a.create({settingsContainer:{flexDirection:"column",alignItems:"center",backgroundColor:e.background,width:"100%",height:"100%",borderTopRightRadius:20,borderTopLeftRadius:20},topBanner:{flexDirection:"row",backgroundColor:e.background,alignItems:"center",justifyContent:"space-between",marginBottom:30,width:"100%",paddingVertical:10,borderBottomWidth:.5,borderColor:e.popOutBorder,borderTopRightRadius:20,borderTopLeftRadius:20,paddingHorizontal:20},headerContainer:{flexDirection:"row",width:"90%",justifyContent:"space-between",marginBottom:15},headerText:{fontSize:20,fontWeight:"700",color:e.grey2},modalText:{fontSize:18,fontWeight:"500"},textInput:{backgroundColor:"#fff",paddingVertical:10,paddingHorizontal:15,width:"90%",fontSize:18,fontWeight:"500",textAlign:"left",borderRadius:15,marginBottom:23},tentChangeListItem:{flexDirection:"row",height:"33%",width:"95%",justifyContent:"center",alignSelf:"center",alignItems:"center",borderBottomWidth:1,borderColor:"#cfcfcf"},tentChangeBtn:{flexDirection:"row",width:"90%",height:45,backgroundColor:"#fff",alignItems:"center",justifyContent:"space-between",borderRadius:15,paddingHorizontal:15},BottomModalView:{margin:0,justifyContent:"flex-end"},leaveButton:{backgroundColor:"#fff",borderRadius:15,padding:15,position:"absolute",bottom:10,width:"90%",alignItems:"center",borderWidth:.5,borderColor:e.popOutBorder}})};function St(e){var t=e.navigation,n=Object(d.c)((function(e){return e.user.currGroupCode})),r=Object(d.c)((function(e){return e.user.currGroupName})),a=Object(d.c)((function(e){return e.user.currGroupRole})),s=Object(d.c)((function(e){return e.user.currUserName})),l=Object(d.c)((function(e){return e.user.currTentType})),u=Object(c.useState)(!1),h=o()(u,2),b=h[0],f=h[1],g=Object(c.useState)(!1),m=o()(g,2),x=m[0],O=m[1],v=Object(c.useState)(!1),S=o()(v,2),T=S[0],k=S[1],R=Object(c.useState)(!1),P=o()(R,2),z=P[0],W=P[1],A=Object(c.useRef)({}),E=Object(dt.c)({Merriweather_400Regular:dt.a,Merriweather_700Bold:dt.b,Montserrat_400Regular:ht.a,Montserrat_700Bold:ht.b,OpenSans_400Regular:bt.a}),N=o()(E,1)[0],M=D().theme;function V(){f(!b)}function U(){O(!x)}function L(){k(!T)}function H(){lt.a.dismiss(),W(!z)}var G=Object(j.d)(["group",n],(function(){return function(e){var t,n;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=p.a.firestore().collection("groups").doc(e).collection("members"),n=[{}],r.next=4,i.a.awrap(t.where("inTent","==",!0).get().then((function(e){e.forEach((function(e){var t=e.data().name,r=e.data().inTent,o=e.data().scheduledHrs,a=e.data().groupRole,i=e.id;e.id==p.a.auth().currentUser.uid?n[0]={id:i,name:t,inTent:r,hours:o,role:a}:n.push({id:i,name:t,inTent:r,hours:o,role:a})}))})).catch((function(e){throw e})));case 4:return r.next=6,i.a.awrap(t.where("inTent","!=",!0).get().then((function(e){e.forEach((function(e){var t=e.data().name,r=e.data().inTent,o=e.data().scheduledHrs,a=e.data().groupRole,i=e.id;e.id==p.a.auth().currentUser.uid?n[0]={id:i,name:t,inTent:r,hours:o,role:a}:n.push({id:i,name:t,inTent:r,hours:o,role:a})}))})).catch((function(e){throw e})));case 6:return r.abrupt("return",n);case 7:case"end":return r.stop()}}),null,null,null,Promise)}(n)}),{initialData:[]}),F=G.isLoading,_=G.isError,Q=(G.error,G.data),q=_e(G.refetch),J=q.isRefetchingByUser,K=q.refetchByUser;var X=function(e){var t=Object(j.e)();return Object(j.c)((function(){return function(e){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(p.a.firestore().collection("groups").doc(e).collection("members").doc(A.current.id).delete().then((function(){})).catch((function(e){})));case 2:p.a.firestore().collection("users").doc(A.current.id).update({groupCode:p.a.firestore.FieldValue.arrayRemove({groupCode:e,groupName:r})}).catch((function(e){})),V();case 4:case"end":return t.stop()}}),null,null,null,Promise)}(e)}),{onError:function(e){},onSuccess:function(){t.invalidateQueries(["group",e])}})}(n);var Y=function(e){var t=Object(j.e)();return Object(j.c)((function(e){return function(e){var t=e.groupRole,n=e.groupCode;p.a.firestore().collection("groups").doc(n).collection("members").doc(A.current.id).update({groupRole:t}).then((function(){})).catch((function(e){})),L(),V()}(e)}),{onError:function(e){},onSuccess:function(){t.invalidateQueries(["group",e])}})}(n);var Z=function(e){var t=e.name,n=e.id,r=e.hours,o=e.role,a=e.inTent,i=a?{backgroundColor:"#3eb489"}:{backgroundColor:"#1f509a"};return Object(B.jsx)(C.a,{onPress:function(){V(),A.current={name:t,id:n,hours:r,role:o}},children:Object(B.jsxs)(y.a,{style:[Tt(M).listItem,i,Tt(M).shadowProp],children:[Object(B.jsx)(w.a,{style:Tt(M).listText,children:t}),a?Object(B.jsxs)(y.a,{style:{flexDirection:"row",alignItems:"center"},children:[Object(B.jsx)(w.a,{style:{color:M.text1},children:"In Tent"}),Object(B.jsx)(I.default,{name:"map-marker-check-outline",color:M.icon1,size:28,style:{marginLeft:5}})]}):null]})})};return F||!N?Object(B.jsx)(Ne,{}):_?Object(B.jsx)(Me,{navigation:t}):Object(B.jsxs)(re.a,{style:Tt(M).container,children:[Object(B.jsxs)(y.a,{style:Tt(M).containerHeader,children:[Object(B.jsx)(te.a,{icon:"menu",size:25,onPress:function(){return t.openDrawer()}}),Object(B.jsx)(w.a,{style:{fontSize:20,fontWeight:"600",color:M.grey1},children:"Group Overview"}),Object(B.jsx)(te.a,{icon:"cog-outline",color:M.grey1,size:25,onPress:H})]}),Object(B.jsx)(w.a,{style:Tt(M).header,children:"Group Name"}),Object(B.jsx)(y.a,{style:Tt(M).boxText,children:Object(B.jsx)(w.a,{style:Tt(M).contentText,children:r})}),Object(B.jsx)(w.a,{style:Tt(M).header,children:"Group Code"}),Object(B.jsx)(y.a,{style:Tt(M).boxText,children:Object(B.jsx)(w.a,{selectable:!0,style:Tt(M).contentText,children:n})}),Object(B.jsx)(w.a,{style:Tt(M).header,children:"Members"}),Object(B.jsx)(Ie.a,{data:Q.slice(1),renderItem:function(e){var t=e.item;return Object(B.jsx)(Z,{name:t.name,id:t.id,hours:t.hours,role:t.role,inTent:t.inTent})},keyExtractor:function(e){return e.id},ListHeaderComponent:0!=Q.length?Object(B.jsx)((function(e){var t=e.item,n=t.inTent?"#3eb489":"#1f509a";return Object(B.jsx)(C.a,{onPress:function(){V(),A.current={name:t.name,id:t.id,hours:t.hours,role:t.role}},children:Object(B.jsxs)(y.a,{style:[Tt(M).listItem,Tt(M).shadowProp,{backgroundColor:n,marginVertical:15}],children:[Object(B.jsx)(w.a,{style:Tt(M).listText,children:t.name}),t.inTent?Object(B.jsxs)(y.a,{style:{flexDirection:"row",alignItems:"center"},children:[Object(B.jsx)(w.a,{style:{color:M.text1},children:"In Tent"}),Object(B.jsx)(I.default,{name:"map-marker-check-outline",color:M.icon1,size:28,style:{marginLeft:5}})]}):null]})})}),{item:Q[0]}):null,refreshControl:Object(B.jsx)(ke.a,{enabled:!0,refreshing:J,onRefresh:K}),style:{marginHorizontal:"4%",flexGrow:1,height:"70%",width:"90%"},showsVerticalScrollIndicator:!1}),Object(B.jsxs)(Ge,{isVisible:b,onBackdropPress:function(){return f(!1)},onSwipeComplete:V,height:"Creator"==a&&A.current.id!=p.a.auth().currentUser.uid?250:190,userStyle:"light",children:[Object(B.jsxs)(y.a,{style:Tt(M).popUpHeaderView,children:[Object(B.jsxs)(y.a,{style:{flexDirection:"row"},children:[Object(B.jsx)(I.default,{name:"account",color:M.grey2,size:28,style:{marginRight:12}}),Object(B.jsxs)(w.a,{style:{fontSize:22,fontWeight:"700"},children:[A.current.name," Information"]})]}),Object(B.jsx)(C.a,{onPress:V,children:Object(B.jsx)(I.default,{name:"close-circle",color:M.grey2,size:26,style:{marginRight:0}})})]}),Object(B.jsxs)(y.a,{style:{height:"70%",width:"94%",justifyContent:"space-between"},children:[Object(B.jsxs)(y.a,{style:"Creator"==a&&A.current.id!=p.a.auth().currentUser.uid?{height:"65%"}:{height:"100%"},children:[Object(B.jsxs)(y.a,{style:Tt(M).popUpHalfBody,children:[Object(B.jsx)(I.default,{name:"timer-sand-empty",color:M.grey2,size:25,style:{marginRight:15}}),Object(B.jsxs)(w.a,{style:Tt(M).modalText,children:["Scheduled Hours: ",A.current.hours," hrs"]})]}),Object(B.jsx)(ut.a,{}),"Creator"==a&&A.current.id!=p.a.auth().currentUser.uid?Object(B.jsxs)(C.a,{style:[Tt(M).popUpHalfBody,{justifyContent:"space-between"}],onPress:function(){L()},children:[Object(B.jsxs)(y.a,{style:{flexDirection:"row"},children:[Object(B.jsx)(I.default,{name:"account-group",color:M.grey2,size:25,style:{marginRight:15}}),Object(B.jsxs)(w.a,{style:Tt(M).modalText,children:["Group Role: ",A.current.role]})]}),Object(B.jsx)(I.default,{name:"chevron-down",color:M.grey2,size:20})]}):Object(B.jsxs)(y.a,{style:Tt(M).popUpHalfBody,children:[Object(B.jsx)(I.default,{name:"account-group",color:M.grey2,size:25,style:{marginRight:15}}),Object(B.jsxs)(w.a,{style:Tt(M).modalText,children:["Group Role: ",A.current.role]})]})]}),"Creator"===a&&A.current.id!=p.a.auth().currentUser.uid?Object(B.jsx)(y.a,{style:{width:"100%",height:"35%",justifyContent:"center"},children:Object(B.jsxs)(C.a,{onPress:U,style:Tt(M).removeBtn,children:[Object(B.jsx)(I.default,{name:"trash-can",color:M.error,size:30,style:{marginRight:15}}),Object(B.jsx)(w.a,{style:{color:M.error,fontSize:22,fontWeight:"600"},children:"Remove"})]})}):null]}),"Creator"==a?Object(B.jsxs)(Ge,{isVisible:T,onBackdropPress:L,onSwipeComplete:L,toggleModal:L,cancelButton:!0,height:180,userStyle:"dark",children:[Object(B.jsxs)(C.a,{onPress:function(){return Y.mutate({groupRole:"Admin",groupCode:n})},style:Tt(M).roleChangeListItem,children:[Object(B.jsx)(I.default,{name:"badge-account-outline",color:M.text1,size:25,style:{marginRight:15}}),Object(B.jsx)(w.a,{style:[Tt(M).modalText,{color:M.text1,marginRight:15}],children:"Admin"})]}),Object(B.jsxs)(C.a,{onPress:function(){return Y.mutate({groupRole:"Member",groupCode:n})},style:[Tt(M).roleChangeListItem,{borderBottomWidth:0}],children:[Object(B.jsx)(I.default,{name:"account",color:M.text1,size:25,style:{marginRight:15}}),Object(B.jsx)(w.a,{style:[Tt(M).modalText,{color:M.text1,marginRight:15}],children:"Member"})]})]}):null,Object(B.jsx)(ue,{body:"Are you sure you want to REMOVE "+A.current.name+" from the group? This action CANNOT be undone.",buttonText:"Remove "+A.current.name,buttonAction:function(){X.mutate()},toggleModal:U,isVisible:x,onBackdropPress:function(){return O(!1)},onSwipeComplete:U})]}),Object(B.jsx)(pt,{isVisible:z,onBackdropPress:H,onSwipeComplete:H,swipeDown:!0,barSize:"none",height:"90%",userStyle:"light",children:Object(B.jsx)(vt,{params:{groupCode:n,groupName:r,userName:s,tentType:l,groupRole:a},navigation:t,toggleModal:H})})]})}var Tt=function(e){return v.a.create({container:{flex:1,backgroundColor:e.primaryContainer,alignItems:"center"},containerHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"},header:{marginBottom:10,marginTop:4,color:e.grey1,width:"90%",fontSize:20,fontFamily:"Montserrat_700Bold"},boxText:{marginBottom:10,width:"90%",backgroundColor:e.white1,borderRadius:8,borderWidth:.3,borderColor:e.white1},contentText:{fontSize:24,textAlign:"center",marginHorizontal:8,fontFamily:"Montserrat_400Regular"},listItem:{backgroundColor:e.primary,padding:4,height:35,marginVertical:4,borderRadius:12,width:"100%",alignSelf:"center",alignItems:"center",flexDirection:"row",justifyContent:"space-between",paddingHorizontal:20},listText:{fontSize:15,fontFamily:"Montserrat_400Regular",color:e.text1},modalText:{fontSize:18,fontWeight:"500"},popUpHeaderView:{flexDirection:"row",height:"20%",width:"94%",justifyContent:"space-between",alignItems:"center"},popUpHalfBody:{flexDirection:"row",alignSelf:"center",height:"50%",width:"90%",justifyContent:"start",alignItems:"center",borderRadius:16},removeBtn:{flexDirection:"row",width:"100%",height:"85%",backgroundColor:"#ececec",alignItems:"center",justifyContent:"center",borderRadius:15},roleChangeListItem:{flexDirection:"row",height:"33%",width:"95%",justifyContent:"center",alignSelf:"center",alignItems:"center",borderBottomWidth:1,borderColor:"#cfcfcf"},shadowProp:{shadowColor:"#171717",shadowOffset:{width:-2,height:3},shadowOpacity:.2,shadowRadius:3},highlightShadow:{shadowColor:"#ff0",shadowRadius:10,shadowOpacity:.8}})},kt=n(221),It=n(106),Rt=n(309),Pt=n(356),Bt=n(366);function zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zt(Object(n),!0).forEach((function(t){Y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wt=Object(c.memo)((function(e){var t=Object(c.useState)(!1),n=o()(t,2),r=n[0],a=n[1],s=Object(c.useState)(!1),l=o()(s,2),u=l[0],h=l[1],b=Object(d.b)(),f=Object(d.c)((function(e){return e.user.currGroupCode}));var g=function(e){var t=Object(j.e)();return Object(j.c)((function(t){return function(e,t){return p.a.firestore().collection("groups").doc(e).collection("members").doc(p.a.auth().currentUser.uid).update({inTent:t})}(e,t)}),{onError:function(e){},onSuccess:function(){t.invalidateQueries(["group",e])}})}(f);Object(Te.p)(Object(c.useCallback)((function(){var e=!0;return e&&""!=f&&null!=f&&p.a.firestore().collection("groups").doc(f).collection("members").doc(p.a.auth().currentUser.uid).get().then((function(t){e&&t.exists&&a(t.data().inTent)})).catch((function(e){})),function(){return e=!1}}),[f]));function m(){h(!u)}return Object(B.jsxs)(y.a,{style:{flex:1},children:[Object(B.jsx)(Pt.a,Dt(Dt({},e),{},{children:Object(B.jsxs)(y.a,{style:At.drawerContent,children:[Object(B.jsx)(y.a,{style:At.userInfoSection,children:Object(B.jsx)(y.a,{style:{flexDirection:"row",marginTop:15},children:Object(B.jsx)(kt.a,{style:At.title,children:"Krzyzewskiville"})})}),Object(B.jsxs)(It.a.Section,{style:At.drawerSection,children:[Object(B.jsx)(Bt.a,{icon:function(e){var t=e.color,n=e.size;return Object(B.jsx)(I.default,{name:"home-outline",color:t,size:n})},label:"Home",onPress:function(){e.navigation.navigate("Home")}}),Object(B.jsx)(Bt.a,{icon:function(e){var t=e.color,n=e.size;return Object(B.jsx)(I.default,{name:"account-group-outline",color:t,size:n})},label:"Group Overview",onPress:function(){e.navigation.navigate("GroupInfo")}}),Object(B.jsx)(Bt.a,{icon:function(e){var t=e.color,n=e.size;return Object(B.jsx)(I.default,{name:"calendar-text-outline",color:t,size:n})},label:"Your Availability",onPress:function(){e.navigation.navigate("AvailabilityScreen")}}),Object(B.jsx)(Bt.a,{icon:function(e){var t=e.color,n=e.size;return Object(B.jsx)(I.default,{name:"calendar-check-outline",color:t,size:n})},label:"Shifts This Week",onPress:function(){e.navigation.navigate("ShiftsScreen")}}),Object(B.jsx)(Bt.a,{icon:function(e){var t=e.color,n=e.size;return Object(B.jsx)(I.default,{name:"calendar-outline",color:t,size:n})},label:"Schedule",onPress:function(){e.navigation.navigate("ScheduleScreen")}}),Object(B.jsx)(Bt.a,{icon:function(e){var t=e.color,n=e.size;return Object(B.jsx)(I.default,{name:"information-outline",color:t,size:n})},label:"Information",onPress:function(){e.navigation.navigate("InfoScreen")}})]}),Object(B.jsx)(It.a.Section,{title:"Status",children:Object(B.jsxs)(y.a,{style:At.status,children:[Object(B.jsx)(w.a,{style:{color:"#555555"},children:"In Tent"}),Object(B.jsx)(Rt.a,{value:r,onValueChange:function(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:a(!r),g.mutate(!r);case 2:case"end":return e.stop()}}),null,null,null,Promise)},color:"#3eb489"})]})})]})})),Object(B.jsx)(It.a.Section,{style:At.bottomDrawerSection,children:Object(B.jsx)(Bt.a,{icon:function(e){var t=e.color,n=e.size;return Object(B.jsx)(I.default,{name:"logout",color:t,size:n})},label:"Log Out",onPress:m})}),Object(B.jsx)(ue,{body:"Are you sure you want to log out?",buttonText:"Log out",buttonAction:function(){i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.awrap(Q.a.multiRemove(["USER_EMAIL","USER_PASSWORD","NAVIGATION_STATE_V1"]));case 2:return e.next=4,i.a.awrap(p.a.auth().signOut());case 4:b(fe());case 5:case"end":return e.stop()}}),null,null,null,Promise)},toggleModal:m,isVisible:u,onBackdropPress:m,onSwipeComplete:m,userStyle:"light"})]})})),At=v.a.create({drawerContent:{flex:1},userInfoSection:{paddingLeft:20},title:{fontSize:16,marginTop:3,fontWeight:"bold"},caption:{fontSize:14,lineHeight:14},row:{marginTop:20,flexDirection:"row",alignItems:"center"},section:{flexDirection:"row",alignItems:"center",marginRight:15},paragraph:{fontWeight:"bold",marginRight:3},drawerSection:{marginTop:15},bottomDrawerSection:{marginBottom:15,borderTopColor:"#f4f4f4",borderTopWidth:1},status:{flexDirection:"row",justifyContent:"space-between",paddingVertical:12,paddingHorizontal:16}}),Et=n(59),Nt=n(43);function Mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(n),!0).forEach((function(t){Y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}for(var Ut=S.a.get("window"),Lt={tableHead:["","Sun","Mon","Tu","Wed","Th","Fri","Sat"],tableTime:[" 1 am"," 2 am"," 3 am"," 4 am"," 5 am"," 6 am"," 7 am"," 8 am"," 9 am","10 am","11 am","12 pm"," 1 pm"," 2 pm"," 3 pm"," 4 pm"," 5 pm"," 6 pm"," 7 pm"," 8 pm"," 9 pm","10 pm","11 pm"]},Ht=[],Gt=0;Gt<48;Gt+=1){for(var Ft=[],_t=0;_t<7;_t+=1)Ft.push("");Ht.push(Ft)}var Qt,qt;function Jt(e){var t=e.navigation,n=Object(d.c)((function(e){return e.user.currGroupCode})),r=Object(c.useState)({window:Ut}),a=o()(r,2),s=a[0],l=a[1],u=Object(c.useState)(!1),b=o()(u,2),f=b[0],g=b[1],m=Object(c.useState)(!1),x=o()(m,2),O=x[0],T=x[1],k=Object(c.useState)(!1),R=o()(k,2),P=R[0],z=R[1],W=Object(c.useState)(""),A=o()(W,2),E=A[0],N=A[1],M=Object(c.useState)(0),V=o()(M,2),U=V[0],L=V[1],H=Object(c.useState)({hour:0,minute:0,day:0}),G=o()(H,2),F=G[0],_=G[1],Q=Object(c.useState)({hour:0,minute:0,day:0}),q=o()(Q,2),J=q[0],K=q[1],X=D().theme,Y=Object(j.d)(["availability",p.a.auth().currentUser.uid,n],(function(){return function(e){var t,n,r;return i.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return(t=new Array(336)).fill([!0,0]),o.next=4,i.a.awrap(p.a.firestore().collection("groups").doc(e).collection("members").doc(p.a.auth().currentUser.uid).get().then((function(e){qt=e.data().availability})));case 4:for(n=0;n<qt.length;n++)if(qt[n])t[n]=[!0,0];else{for(r=n;r<qt.length&&!qt[r];)t[r]=[!0,0],r++;t[r-1]=[!1,r-n],n=r}return o.abrupt("return",t);case 6:case"end":return o.stop()}}),null,null,null,Promise)}(n)})),$=Y.isLoading,ee=Y.isError,te=(Y.error,Y.data),ne=_e(Y.refetch),re=ne.isRefetchingByUser,oe=ne.refetchByUser;var ae=function(e){var t=Object(j.e)();return Object(j.c)((function(){return ie(e)}),{onError:function(e){},onSuccess:function(){t.invalidateQueries(["availability",p.a.auth().currentUser.uid,e])}})}(n),ie=function(e){var t=p.a.firestore().collection("groups").doc(e).collection("members").doc(p.a.auth().currentUser.uid);if(7==U)return de(),void N("Please select a day");var n=48*parseInt(U)+parseInt(F.day)+parseInt(F.minute)+2*parseInt(F.hour),r=48*parseInt(U)+parseInt(J.day)+parseInt(J.minute)+2*parseInt(J.hour);if(r==48*parseInt(U)&&(r+=48),n>=r)return de(),void N("Invalid time slot");for(var o=n;o<r;o++)qt[o]=!1;t.update({availability:qt}),le()},ce=function(e){var t=Object(j.e)();return Object(j.c)((function(){return se(e)}),{onError:function(e){},onSuccess:function(){t.invalidateQueries(["availability",p.a.auth().currentUser.uid,e])}})}(n),se=function(e){for(var t=p.a.firestore().collection("groups").doc(e).collection("members").doc(p.a.auth().currentUser.uid),n=Qt-te[Qt][1];n<=Qt;n++)qt[n]=!0;t.update({availability:qt}),ue()};function le(){g(!f)}function ue(){T(!O)}function de(){z(!P)}var he=function(e,t,n){return Object(B.jsx)(C.a,{style:[Kt(X).btn,{height:35*parseInt(n[t][1])}],onPress:function(){ue(),Qt=t}})};return Object(c.useEffect)((function(){var e=S.a.addEventListener("change",(function(e){var t=e.window;l({window:t})}));return function(){return null==e?void 0:e.remove()}})),$?Object(B.jsx)(Ne,{}):ee?Object(B.jsx)(Me,{navigation:t}):Object(B.jsxs)(y.a,{style:Kt(X).container,children:[Object(B.jsx)(Et.e,{borderStyle:{borderColor:"transparent"},children:Object(B.jsx)(Et.c,{data:Lt.tableHead,style:v.a.flatten(Kt(X).head),widthArr:[s.window.width/12,s.window.width*(11/84),s.window.width*(11/84),s.window.width*(11/84),s.window.width*(11/84),s.window.width*(11/84),s.window.width*(11/84),s.window.width*(11/84)],textStyle:{textAlign:"center",fontWeight:"700"}})}),Object(B.jsx)(Z.a,{showsVerticalScrollIndicator:!1,refreshControl:Object(B.jsx)(ke.a,{enabled:!0,refreshing:re,onRefresh:oe}),children:Object(B.jsxs)(Et.e,{borderStyle:{borderWidth:0,borderColor:"transparent"},style:{flexDirection:"row"},children:[Object(B.jsx)(Et.f,{style:v.a.flatten([{width:s.window.width/12,marginTop:34,alignItems:"center"}]),children:Object(B.jsx)(Et.b,{data:Lt.tableTime,heightArr:new Array(23).fill(70),textStyle:{textAlign:"center",fontWeight:"700",fontSize:10,width:"70%",color:"#717573",marginLeft:2}})}),Object(B.jsx)(Et.f,{style:{flex:1},children:Ht.map((function(e,t){return Object(B.jsx)(Et.f,{style:v.a.flatten(Kt(X).row),children:e.map((function(e,n){return Object(B.jsx)(Et.a,{data:te[48*n+t][0]?e:he(0,48*n+t,te),style:v.a.flatten([Kt(X).cell,{width:s.window.width*(11/84)}])},n)}))},t)}))})]})}),Object(B.jsx)(y.a,{style:Kt(X).addContainer,children:Object(B.jsx)(C.a,{onPress:le,children:Object(B.jsx)(y.a,{style:Kt(X).FAB,children:Object(B.jsx)(I.default,{name:"plus",color:X.text2,size:30})})})}),Object(B.jsx)(Ge,{isVisible:O,onBackdropPress:ue,height:55,userStyle:"light",children:Object(B.jsxs)(C.a,{onPress:function(){return ce.mutate()},style:{flexDirection:"row",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",borderRadius:20},children:[Object(B.jsx)(I.default,{name:"trash-can-outline",color:X.error,size:26}),Object(B.jsx)(w.a,{style:{textAlign:"center",color:X.error,fontSize:26,fontWeight:"600",marginLeft:10},children:"Delete"})]})}),Object(B.jsxs)(pt,{isVisible:f,onBackdropPress:le,swipeDown:!1,barSize:"none",height:"90%",userStyle:"light",children:[Object(B.jsx)(Ot.a,{visible:P,onDismiss:function(){return z(!1)},wrapperStyle:{top:0},duration:2e3,children:Object(B.jsx)(w.a,{style:{textAlign:"center",color:X.text1},children:E})}),Object(B.jsxs)(y.a,{style:{height:"10%",width:"100%",flexDirection:"row",justifyContent:"center",alignItems:"center",borderBottomWidth:1},children:[Object(B.jsx)(pt.Header,{fontSize:24,verticalMargin:0,children:"Add New Busy Time"}),Object(B.jsx)(C.a,{onPress:le,style:{justifyContent:"center",position:"absolute",right:15},children:Object(B.jsx)(I.default,{name:"close-circle",color:X.grey2,size:26})})]}),Object(B.jsxs)(y.a,{style:Kt(X).modalBody,children:[Object(B.jsxs)(y.a,{style:Kt(X).selectDay,children:[Object(B.jsx)(w.a,{style:Kt(X).modalText,children:"Select Day: "}),Object(B.jsx)(y.a,{style:{width:"100%",height:"75%",alignItems:"center"},children:Object(B.jsxs)(Nt.a,{selectedValue:U,onValueChange:function(e,t){L(e)},style:"ios"===h.a.OS?{height:"100%",width:"80%"}:{height:30,width:"70%",marginTop:20},itemStyle:"ios"===h.a.OS?Kt(X).pickerItem:{},children:[Object(B.jsx)(Nt.a.Item,{label:"Sunday",value:0}),Object(B.jsx)(Nt.a.Item,{label:"Monday",value:1}),Object(B.jsx)(Nt.a.Item,{label:"Tuesday",value:2}),Object(B.jsx)(Nt.a.Item,{label:"Wednesday",value:3}),Object(B.jsx)(Nt.a.Item,{label:"Thursday",value:4}),Object(B.jsx)(Nt.a.Item,{label:"Friday",value:5}),Object(B.jsx)(Nt.a.Item,{label:"Saturday",value:6})]})})]}),Object(B.jsxs)(y.a,{style:Kt(X).selectTime,children:[Object(B.jsx)(w.a,{style:Kt(X).modalText,children:"Start Time: "}),Object(B.jsxs)(y.a,{style:Kt(X).timePickerBody,children:[Object(B.jsxs)(Nt.a,{selectedValue:F.hour,onValueChange:function(e,t){_(Vt(Vt({},F),{},{hour:e}))},style:"ios"===h.a.OS?Kt(X).picker:{height:30,width:"30%",marginTop:20},itemStyle:"ios"===h.a.OS?Kt(X).pickerItem:{},children:[Object(B.jsx)(Nt.a.Item,{label:"12",value:0}),Object(B.jsx)(Nt.a.Item,{label:"1",value:1}),Object(B.jsx)(Nt.a.Item,{label:"2",value:2}),Object(B.jsx)(Nt.a.Item,{label:"3",value:3}),Object(B.jsx)(Nt.a.Item,{label:"4",value:4}),Object(B.jsx)(Nt.a.Item,{label:"5",value:5}),Object(B.jsx)(Nt.a.Item,{label:"6",value:6}),Object(B.jsx)(Nt.a.Item,{label:"7",value:7}),Object(B.jsx)(Nt.a.Item,{label:"8",value:8}),Object(B.jsx)(Nt.a.Item,{label:"9",value:9}),Object(B.jsx)(Nt.a.Item,{label:"10",value:10}),Object(B.jsx)(Nt.a.Item,{label:"11",value:11})]}),Object(B.jsxs)(Nt.a,{selectedValue:F.minute,onValueChange:function(e,t){_(Vt(Vt({},F),{},{minute:e}))},style:"ios"===h.a.OS?Kt(X).picker:{height:30,width:"30%",marginTop:20},itemStyle:"ios"===h.a.OS?Kt(X).pickerItem:{},children:[Object(B.jsx)(Nt.a.Item,{label:"00",value:0}),Object(B.jsx)(Nt.a.Item,{label:"30",value:1})]}),Object(B.jsxs)(Nt.a,{selectedValue:F.day,onValueChange:function(e,t){_(Vt(Vt({},F),{},{day:e}))},style:"ios"===h.a.OS?Kt(X).picker:{height:30,width:"30%",marginTop:20},itemStyle:"ios"===h.a.OS?Kt(X).pickerItem:{},children:[Object(B.jsx)(Nt.a.Item,{label:"AM",value:0}),Object(B.jsx)(Nt.a.Item,{label:"PM",value:24})]})]})]}),Object(B.jsxs)(y.a,{style:Kt(X).selectTime,children:[Object(B.jsx)(w.a,{style:Kt(X).modalText,children:"End Time: "}),Object(B.jsxs)(y.a,{style:Kt(X).timePickerBody,children:[Object(B.jsxs)(Nt.a,{selectedValue:J.hour,onValueChange:function(e,t){K(Vt(Vt({},J),{},{hour:e}))},style:"ios"===h.a.OS?Kt(X).picker:{height:30,width:"30%",marginTop:20},itemStyle:"ios"===h.a.OS?Kt(X).pickerItem:{},children:[Object(B.jsx)(Nt.a.Item,{label:"12",value:0}),Object(B.jsx)(Nt.a.Item,{label:"1",value:1}),Object(B.jsx)(Nt.a.Item,{label:"2",value:2}),Object(B.jsx)(Nt.a.Item,{label:"3",value:3}),Object(B.jsx)(Nt.a.Item,{label:"4",value:4}),Object(B.jsx)(Nt.a.Item,{label:"5",value:5}),Object(B.jsx)(Nt.a.Item,{label:"6",value:6}),Object(B.jsx)(Nt.a.Item,{label:"7",value:7}),Object(B.jsx)(Nt.a.Item,{label:"8",value:8}),Object(B.jsx)(Nt.a.Item,{label:"9",value:9}),Object(B.jsx)(Nt.a.Item,{label:"10",value:10}),Object(B.jsx)(Nt.a.Item,{label:"11",value:11})]}),Object(B.jsxs)(Nt.a,{selectedValue:J.minute,onValueChange:function(e,t){K(Vt(Vt({},J),{},{minute:e}))},style:"ios"===h.a.OS?Kt(X).picker:{height:30,width:"30%",marginTop:20},itemStyle:"ios"===h.a.OS?Kt(X).pickerItem:{},children:[Object(B.jsx)(Nt.a.Item,{label:"00",value:0}),Object(B.jsx)(Nt.a.Item,{label:"30",value:1})]}),Object(B.jsxs)(Nt.a,{selectedValue:J.day,onValueChange:function(e,t){K(Vt(Vt({},J),{},{day:e}))},style:"ios"===h.a.OS?Kt(X).picker:{height:30,width:"30%",marginTop:20},itemStyle:"ios"===h.a.OS?Kt(X).pickerItem:{},children:[Object(B.jsx)(Nt.a.Item,{label:"AM",value:0}),Object(B.jsx)(Nt.a.Item,{label:"PM",value:24})]})]})]})]}),Object(B.jsxs)(y.a,{style:Kt(X).modalFooter,children:[Object(B.jsx)(C.a,{style:Kt(X).addBtn,onPress:le,children:Object(B.jsx)(w.a,{style:Kt(X).btnText,children:"Cancel"})}),Object(B.jsx)(C.a,{style:[Kt(X).addBtn,{backgroundColor:X.primary}],onPress:function(){return ae.mutate()},children:Object(B.jsx)(w.a,{style:[Kt(X).btnText,{color:X.text1}],children:"Add"})})]})]})]})}var Kt=function(e){return v.a.create({container:{flex:1,padding:0,backgroundColor:e.background},text:{textAlign:"center"},modalText:{fontSize:18,color:e.text2,textAlign:"center",padding:0},modalBody:{alignItems:"center",width:"100%",height:"80%",marginTop:10},picker:{height:"100%",width:"35%"},pickerItem:{height:"100%"},selectDay:{alignItems:"center",width:"70%",height:"23%"},selectTime:{alignItems:"center",height:"35%",width:"90%"},timePickerBody:{flexDirection:"row",width:"100%",height:"90%",justifyContent:"center"},modalFooter:{flexDirection:"row",width:"100%",height:"10%",alignItems:"center",justifyContent:"space-evenly"},addBtn:{alignItems:"center",justifyContent:"center",width:"50%",width:"40%",height:"60%",borderRadius:15},btnText:{color:e.text2,fontSize:24,fontWeight:"600"},head:{backgroundColor:e.background,height:35,borderBottomLeftRadius:20,borderBottomRightRadius:20,shadowColor:"#171717",shadowOffset:{width:0,height:-5},shadowOpacity:.9,shadowRadius:10,elevation:3,overflow:"visible"},row:{height:35,flexDirection:"row",borderBottomWidth:1,borderColor:"#cfcfcf"},cell:{height:35,flexDirection:"column",justifyContent:"flex-end",alignItems:"center",borderRightWidth:1,borderColor:"#cfcfcf",margin:0},btn:{width:"92%",height:42,backgroundColor:e.primary,borderRadius:7,borderWidth:1,alignSelf:"center"},addContainer:{position:"absolute",backgroundColor:"#00000000",flexDirection:"row",justifyContent:"center",alignItems:"center",right:25,bottom:20},FAB:{height:50,width:50,backgroundColor:"#D2D5DC",borderRadius:12,justifyContent:"center",alignItems:"center"}})},Xt=n(187),Yt=n(57),Zt=n(310),$t=n(30),en=n(313),tn=n(314),nn=n(312),rn=n(248),on=n.n(rn);"android"===h.a.OS&&Yt.a.setLayoutAnimationEnabledExperimental&&Yt.a.setLayoutAnimationEnabledExperimental(!0);var an,cn=["12am","1am","2am","3am","4am","5am","6am","7am","8am","9am","10am","11am","12am","1pm","2pm","3pm","4pm","5pm","6pm","7pm","8pm","9pm","10pm","11pm"],sn=new Array,ln=S.a.get("window");function un(e){var t=e.navigation,n=Object(d.c)((function(e){return e.user.currGroupCode})),r=Object(d.c)((function(e){return e.user.currGroupRole})),a=Object(d.c)((function(e){return e.user.currTentType})),s=Object(c.useState)(!1),l=o()(s,2),u=l[0],h=l[1],b=Object(c.useState)(!1),f=o()(b,2),g=f[0],m=f[1],x=Object(c.useState)(!1),O=o()(x,2),S=O[0],k=O[1],R=Object(c.useState)(!1),P=o()(R,2),z=P[0],W=P[1],A=Object(c.useState)(!1),E=o()(A,2),N=E[0],U=E[1],L=Object(c.useState)({open:!1}),H=o()(L,2),G=H[0],F=H[1],_=Object(c.useState)("Current Week"),Q=o()(_,2),q=Q[0],J=Q[1],K=Object(c.useState)("Sunday"),X=o()(K,2),Y=X[0],$=X[1],ee=Object(c.useState)("Select a Member"),te=o()(ee,2),ne=te[0],re=te[1],oe=Object(c.useRef)(""),ae=Object(c.useRef)(0),ie=Object(c.useRef)([]),ce=Object(c.useRef)(!1),se=Object(c.useRef)([]),le=Object(c.useRef)([{id:1,name:"empty",color:"#ececec",changedHrs:0}]),de=D().theme,he=Object($t.useSharedValue)(0),be=Object($t.useSharedValue)(1),je=G.open,fe=Object(d.b)(),ge=Object(j.d)(["groupSchedule",p.a.auth().currentUser.uid,n,q],(function(){return function(e,t){var n;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i.a.awrap(p.a.firestore().collection("groups").doc(e).get().then((function(e){n=e.data().groupSchedule,sn=e.data().previousSchedule,le.current=e.data().memberArr,an=e.data().previousMemberArr})).catch((function(e){throw e})));case 2:if("Current Week"!=t){r.next=4;break}return r.abrupt("return",n);case 4:return r.abrupt("return",sn);case 5:case"end":return r.stop()}}),null,null,null,Promise)}(n,q)}),{initialData:[],onSuccess:function(){h(!0),m(!1)}}),me=ge.isLoading,xe=ge.isError,pe=(ge.error,ge.refetch),ye=ge.data,Oe=_e(pe),we=Oe.isRefetchingByUser,ve=Oe.refetchByUser;var Ce=function(e,t){var n=Object(j.e)();return Object(j.c)((function(e){return function(e){var t,n,r,o,a,c,s,l,u,d,h,b;return i.a.async((function(j){for(;;)switch(j.prev=j.next){case 0:if(t=e.index,n=e.oldMember,r=e.newMember,o=e.groupCode,a=p.a.firestore().collection("groups").doc(o),c=ye,"empty"===r||!ye[t].trim().split(" ").includes(r)){j.next=9;break}fe(M()),fe(V("Member already in chosen timeslot")),ce.current=!1,j.next=21;break;case 9:return c[t]=c[t].replace(n,r),s=le.current.findIndex((function(e){return e.name===n})),l=le.current.findIndex((function(e){return e.name===r})),j.next=14,i.a.awrap(a.collection("members").doc(le.current[s].id).get().then((function(e){u=e.data().scheduledHrs-.5,(h=e.data().shifts)[t]=!1})));case 14:return j.next=16,i.a.awrap(a.collection("members").doc(le.current[l].id).get().then((function(e){d=e.data().scheduledHrs+.5,(b=e.data().shifts)[t]=!0})));case 16:a.collection("members").doc(le.current[s].id).update({scheduledHrs:u,shifts:h}),a.collection("members").doc(le.current[l].id).update({scheduledHrs:d,shifts:b}),a.update({groupSchedule:c}),ie.current=c,ce.current=!0;case 21:case"end":return j.stop()}}),null,null,null,Promise)}(e)}),{onError:function(e){},onSuccess:function(){ce.current&&n.setQueryData(["groupSchedule",p.a.auth().currentUser.uid,e,t],ie.current)}})}(n,q);var Se=function(e,t,n){var r=Object(j.e)();return Object(j.c)((function(){return function(e,t){return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(Ae(e,t).then((function(t){ie.current=t,void 0!==ye[0]&&(sn=ye),an=le.current,p.a.firestore().collection("groups").doc(e).update({groupSchedule:ie.current,previousSchedule:sn,previousMemberArr:le.current}).catch((function(e){})),fe(V("New Schedule created")),fe(M())})).catch((function(e){fe(V("Not enough members")),fe(M())})));case 2:case"end":return n.stop()}}),null,null,null,Promise)}(e,t)}),{onError:function(e){},onSuccess:function(){r.setQueryData(["groupSchedule",p.a.auth().currentUser.uid,e,n],ie.current),r.invalidateQueries(["shifts",p.a.auth().currentUser.uid,e])}})}(n,a,q);function Te(){Xt.a.configureNext(Xt.a.Presets.spring),k(!S)}function Re(){W(!z)}function Pe(){U(!N)}function Be(){"Current Week"==q?(J("Previous Week"),be.value=0):(J("Current Week"),be.value=1),m(!0),pe()}var ze=Object(c.memo)((function(){return Object(B.jsx)(Et.e,{style:{width:"7%",marginTop:-31},children:Object(B.jsx)(Et.b,{data:cn,heightArr:[62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62],textStyle:v.a.flatten(dn(de).timesText)})})})),De=Object(c.memo)((function(e){var t=e.index,n=e.person,o="Current Week"==q?le.current.findIndex((function(e){return e.name==n})):an.findIndex((function(e){return e.name==n})),a=-1!=o?"Current Week"==q?le.current[o].color:an[o].color:"#fff";return"Current Week"!=q||"Creator"!=r&&"Admin"!=r?Object(B.jsx)(y.a,{style:{flex:1},children:Object(B.jsx)(y.a,{style:[dn(de).timeSlotBtn,{backgroundColor:a}],children:Object(B.jsx)(w.a,{style:dn(de).btnText,adjustsFontSizeToFit:!0,minimumFontScale:.5,children:n})})}):Object(B.jsx)(y.a,{style:{flex:1},children:Object(B.jsx)(C.a,{onPress:function(){ae.current=t,oe.current=n,Te()},children:Object(B.jsx)(y.a,{style:[dn(de).timeSlotBtn,{backgroundColor:a}],children:Object(B.jsx)(w.a,{style:"empty"==n?[dn(de).btnText,{color:de.error,fontWeight:"700"}]:dn(de).btnText,adjustsFontSizeToFit:!0,minimumFontScale:.5,numberOfLines:1,children:n})})})})})),We=function(e,t,n){var r=n.trim().split(" ");return Object(B.jsxs)(y.a,{style:dn(de).row,children:[Object(B.jsx)(De,{index:t,person:r[0]}),r.length>1?Object(B.jsx)(De,{index:t,person:r[1]}):null,r.length>2?Object(B.jsx)(De,{index:t,person:r[2]}):null,r.length>2?Object(B.jsx)(De,{index:t,person:r[3]}):null,r.length>2?Object(B.jsx)(De,{index:t,person:r[4]}):null,r.length>2?Object(B.jsx)(De,{index:t,person:r[5]}):null,r.length>6?Object(B.jsx)(De,{index:t,person:r[6]}):null,r.length>6?Object(B.jsx)(De,{index:t,person:r[7]}):null,r.length>6?Object(B.jsx)(De,{index:t,person:r[8]}):null,r.length>6?Object(B.jsx)(De,{index:t,person:r[9]}):null]})},Ee=Object(c.memo)((function(e){var t=e.day,n=0;switch(t){case"Monday":n=48;break;case"Tuesday":n=96;break;case"Wednesday":n=144;break;case"Thursday":n=192;break;case"Friday":n=240;break;case"Saturday":n=288;break;default:n=0}var r=ye.slice(n,n+48);return Object(B.jsx)(y.a,{style:{marginTop:0,width:"90%"},children:Object(B.jsx)(Et.e,{borderStyle:{borderColor:"transparent"},children:r.map((function(e,t){return Object(B.jsx)(Et.f,{style:v.a.flatten(dn(de).row),children:Object(B.jsx)(Et.a,{data:We(0,t+n,r[t]),textStyle:v.a.flatten(dn(de).text)})},t)}))})})})),Ve=Object($t.useAnimatedStyle)(function(){var e=function(){return{transform:[{translateX:Object($t.withSpring)(he.value*(ln.width/7),{damping:50,stiffness:90})}]}};return e._closure={withSpring:$t.withSpring,dayHighlightOffset:he,win:{width:ln.width}},e.asString="function _f(){const{withSpring,dayHighlightOffset,win}=jsThis._closure;{return{transform:[{translateX:withSpring(dayHighlightOffset.value*(win.width/7),{damping:50,stiffness:90})}]};}}",e.__workletHash=8091828285898,e.__location="/Users/kevin/code/duke_tenting/duke-tenting-app-rev2/src/screens/Schedule.js (467:46)",e.__optimalization=2,e}()),Ue=Object($t.useAnimatedStyle)(function(){var e=function(){return{transform:[{translateX:Object($t.withSpring)(be.value*(.3*ln.width),{damping:50,stiffness:90})}]}};return e._closure={withSpring:$t.withSpring,isCurrentWeek:be,win:{width:ln.width}},e.asString="function _f(){const{withSpring,isCurrentWeek,win}=jsThis._closure;{return{transform:[{translateX:withSpring(isCurrentWeek.value*(win.width*0.3),{damping:50,stiffness:90})}]};}}",e.__workletHash=8569136957717,e.__location="/Users/kevin/code/duke_tenting/duke-tenting-app-rev2/src/screens/Schedule.js (479:44)",e.__optimalization=2,e}()),Le=function(e){var t=e.day,n=e.abbrev,r=e.value;return Object(B.jsxs)(C.a,{style:[dn(de).button,{backgroundColor:"transparent",zIndex:2}],onPress:function(){$(t),he.value=r,0!=ye.length&&se.current.scrollTo({x:0,y:0,animated:!0})},children:[Object(B.jsx)(w.a,{style:Y==t?[dn(de).buttonText,{color:"white"}]:[dn(de).buttonText,{color:"black"}],children:n}),Y==t?Object(B.jsx)(Zt.a,{size:8,style:{alignSelf:"center",backgroundColor:de.text1}}):null]})};return me||!u?Object(B.jsx)(Ne,{}):xe?Object(B.jsx)(Me,{navigation:t}):0!=ye.length||g?Object(B.jsx)(en.a,{children:Object(B.jsxs)(y.a,{style:dn(de).bigContainer,children:[Object(B.jsxs)(Ge,{isVisible:S,onBackdropPress:Te,onSwipeComplete:Te,toggleModal:Te,userStyle:"light",cancelButton:!0,height:.15*ln.height,children:[Object(B.jsx)(C.a,{onPress:Re,style:{height:"50%",width:"100%"},children:Object(B.jsxs)(y.a,{style:{flex:1,justifyContent:"center",alignItems:"center",borderBottomWidth:1,borderColor:"#cfcfcf",flexDirection:"row"},children:[Object(B.jsx)(w.a,{style:{textAlign:"center",fontSize:24,color:"black"},children:ne}),Object(B.jsx)(I.default,{name:"chevron-down",color:de.icon2,size:30,style:{marginLeft:10}})]})}),Object(B.jsx)(C.a,{onPress:function(){"Select a Member"==ne?Te():(Te(),Ce.mutate({index:ae.current,oldMember:oe.current,newMember:ne,groupCode:n}))},style:{height:"50%",width:"100%"},children:Object(B.jsx)(y.a,{style:{height:"100%",justifyContent:"center"},children:Object(B.jsx)(w.a,{style:{textAlign:"center",color:"black",fontSize:20,fontWeight:"500"},children:"Edit"})})}),Object(B.jsx)(pt,{isVisible:z,onBackdropPress:function(){return W(!1)},onSwipeComplete:Re,userStyle:"light",children:Object(B.jsx)(y.a,{style:{marginTop:10,width:"90%",alignItems:"center",height:"92%"},children:Object(B.jsx)(y.a,{style:{height:"100%",width:"100%"},children:Object(B.jsx)(Ie.a,{data:le.current,renderItem:function(e){var t=e.item,n=.45*ln.height*(1/le.current.length)+8;return Object(B.jsx)(y.a,{style:{width:"100%"},children:Object(B.jsx)(C.a,{onPress:function(){re(t.name),Re()},style:{width:"100%"},children:Object(B.jsx)(y.a,{style:{height:n,justifyContent:"center"},children:Object(B.jsx)(w.a,{style:{textAlign:"center",color:"black",fontSize:18},children:t.name})})})})},ItemSeparatorComponent:function(){return Object(B.jsx)(ut.a,{})},keyExtractor:function(e){return e.id}})})})})]}),Object(B.jsx)(ue,{toggleModal:Pe,body:"Are you sure you want to create a new schedule? This will change the current schedule for all members and cannot be undone.",buttonText:"Create New Schedule",buttonAction:function(){Se.mutate()},isVisible:N,userStyle:"light",onBackdropPress:function(){return U(!1)},onSwipeComplete:Pe}),Object(B.jsx)(y.a,{style:{zIndex:1},children:Object(B.jsxs)(y.a,{style:[dn(de).buttonContainer,dn(de).shadowProp],children:[Object(B.jsx)($t.default.View,{style:[dn(de).dayHighlight,Ve]}),Object(B.jsx)(Le,{day:"Sunday",abbrev:"Sun",value:0}),Object(B.jsx)(Le,{day:"Monday",abbrev:"Mon",value:1}),Object(B.jsx)(Le,{day:"Tuesday",abbrev:"Tue",value:2}),Object(B.jsx)(Le,{day:"Wednesday",abbrev:"Wed",value:3}),Object(B.jsx)(Le,{day:"Thursday",abbrev:"Thur",value:4}),Object(B.jsx)(Le,{day:"Friday",abbrev:"Fri",value:5}),Object(B.jsx)(Le,{day:"Saturday",abbrev:"Sat",value:6})]})}),Object(B.jsx)(y.a,{style:{width:"100%",justifyContent:"center",alignItems:"center"},children:Object(B.jsxs)(y.a,{style:dn(de).toggleWeekContainer,children:[Object(B.jsx)($t.default.View,{style:[dn(de).toggleWeekHighlight,Ue]}),Object(B.jsx)(C.a,{style:dn(de).toggleWeekButton,onPress:Be,children:Object(B.jsx)(w.a,{children:"Previous"})}),Object(B.jsx)(C.a,{style:dn(de).toggleWeekButton,onPress:Be,children:Object(B.jsx)(w.a,{children:"Current"})})]})}),Object(B.jsx)(y.a,{style:{backgroundColor:"#D2D5DC",marginTop:0,flex:1,zIndex:0},children:Object(B.jsx)(Z.a,{showsVerticalScrollIndicator:!1,refreshControl:Object(B.jsx)(ke.a,{enabled:!0,refreshing:we,onRefresh:ve}),ref:se,contentContainerStyle:{paddingBottom:30},style:{width:"100%"},removeClippedSubviews:!0,children:Object(B.jsxs)(y.a,{style:{flexDirection:"row",marginTop:20,padding:0,width:"100%"},children:[Object(B.jsx)(ze,{}),Object(B.jsx)(Ee,{day:Y})]})})}),"Member"!=r?Object(B.jsx)(tn.a,{children:Object(B.jsx)(nn.a.Group,{open:je,icon:"plus",style:{position:"absolute"},fabStyle:{backgroundColor:"#9FA6B7"},actions:[{icon:"calendar",label:"Create New Schedule",onPress:function(){return Pe()}}],onStateChange:function(e){var t=e.open;F({open:t})},onPress:function(){}})}):null]})}):Object(B.jsxs)(y.a,{style:dn(de).emptyStateContainer,children:[Object(B.jsx)(w.a,{children:"Group Schedule has not been created"}),Object(B.jsx)(T.a,{style:{opacity:.5},source:on.a}),"Member"!=r?Object(B.jsxs)(C.a,{style:{width:"50%",height:50,backgroundColor:de.primary,borderRadius:30,flexDirection:"row",justifyContent:"center",alignItems:"center",marginTop:50},onPress:function(){return Se.mutate()},children:[Object(B.jsx)(I.default,{name:"plus",color:de.icon1,size:20,style:{marginRight:10}}),Object(B.jsx)(w.a,{style:{color:de.text1,fontSize:15,fontWeight:"500"},children:"Create Schedule"})]}):Object(B.jsx)(w.a,{children:"Ask the creator or an admin to create a new schedule"})]})}var dn=function(e){return v.a.create({bigContainer:{flex:1,backgroundColor:"#D2D5DC",flexGrow:1,overflow:"hidden"},emptyStateContainer:{flex:1,justifyContent:"center",alignItems:"center",paddingBottom:"30%",backgroundColor:e.background},text:{margin:3},timesText:{fontWeight:"800",fontSize:9,width:"100%",textAlign:"center"},dayHighlight:{position:"absolute",backgroundColor:"#1F509Ad0",width:ln.width/7,height:38,borderRadius:100},toggleWeekContainer:{borderRadius:10,width:"60%",height:30,flexDirection:"row",justifyContent:"space-around",alignItems:"center",borderWidth:1,marginTop:20,backgroundColor:"#FAFAFA",padding:1,borderColor:"#fff"},toggleWeekHighlight:{position:"absolute",width:"50%",height:"100%",left:0,borderRadius:10,backgroundColor:"#FCFCFC",shadowColor:"#171717",shadowOffset:{width:0,height:0},shadowOpacity:.2,shadowRadius:2},toggleWeekButton:{flex:1,justifyContent:"center",alignItems:"center",height:"100%"},buttonContainer:{flexDirection:"row",justifyContent:"space-between",borderBottomRightRadius:20,borderBottomLeftRadius:20,backgroundColor:e.primaryContainer},button:{backgroundColor:e.grey3,width:ln.width/7,height:38,alignItems:"center",justifyContent:"center"},buttonText:{fontSize:"auto",fontWeight:"500",textAlign:"center",color:"black"},topEditBtn:{width:"100%",backgroundColor:"white",justifyContent:"center",height:32},topEditBtnText:{textAlign:"center",fontSize:16,fontWeight:"500"},dayHeader:{marginTop:20,fontSize:28,fontWeight:"700",textAlign:"center"},row:{flexDirection:"row",backgroundColor:"lavender",width:"100%",height:31,alignItems:"center",borderBottomColor:"black",borderBottomWidth:1},timeSlotBtn:{height:30,backgroundColor:"#78B7BB",paddingHorizontal:1,justifyContent:"center"},btnText:{textAlign:"center",color:e.text2,fontWeight:"400",fontSize:11},shadowProp:{shadowColor:"#171717",shadowOffset:{width:-3,height:5},shadowOpacity:.4,shadowRadius:3},fabStyle:{bottom:16,right:.02*ln.width,position:"absolute"}})};function hn(){return Object(B.jsx)(y.a,{style:{justifyContent:"center",alignItems:"center"},children:Object(B.jsx)(w.a,{style:{fontSize:30,fontWeight:"700"},children:" COMING SOON ... "})})}var bn=n(357),jn=n.n(bn),fn=n(358),gn=n.n(fn),mn={tableHead:["","Sunday-Thursday","Friday and Saturday"],tableTitle:["Night"],tableData:[["1 am - 7 am","2:30 am - 7 am"]]},xn={tableData:[["Starting Dates","Jan *, 2023 - Feb *, 2023"],["Occupancy Requirements"," \u25cf TWO members of the tent must be on duty during the day.\n\u25cf TEN members during night hours"]]},pn={tableData:[["Starting Dates","Jan *, 2023 - Feb *, 2023"],["Occupancy Requirements"," \u25cf ONE member of the tent must be on duty during the day.\n\u25cf SIX members during night hours"]]},yn={tableData:[["Starting Dates","Feb *, 2023 - Feb *, 2023"],["Occupancy Requirements"," \u25cf ONE member of the tent must be on duty during the day.\n\u25cf TWO members during night hours"]]},On=S.a.get("window");function wn(){var e,t,n,r,o,a,i=D().theme,s=On.width/1e3,l=Object(c.useRef)(),u=function(e){var t=e.data;return Object(B.jsxs)(y.a,{style:{flexDirection:"row"},children:[Object(B.jsx)(w.a,{style:{fontSize:30,paddingLeft:30},children:"\u25cf"}),Object(B.jsx)(w.a,{style:[vn(i).contentText,{flex:1}],children:t})]})};function d(e){l.current.scrollTo({x:0,y:e,animated:!0})}return Object(B.jsxs)(re.a,{style:vn(i).container,children:[Object(B.jsxs)(y.a,{style:vn(i).buttonContainer,children:[Object(B.jsx)(C.a,{style:vn(i).button,onPress:function(){return d(e)},children:Object(B.jsx)(w.a,{style:vn(i).buttonText,children:"Hours"})}),Object(B.jsx)(C.a,{style:vn(i).button,onPress:function(){return d(t)},children:Object(B.jsx)(w.a,{style:vn(i).buttonText,children:"Tent Checks"})}),Object(B.jsx)(C.a,{style:vn(i).button,onPress:function(){return d(n)},children:Object(B.jsx)(w.a,{style:vn(i).buttonText,children:"Missed Checks"})}),Object(B.jsx)(C.a,{style:vn(i).button,onPress:function(){return d(r)},children:Object(B.jsx)(w.a,{style:vn(i).buttonText,children:"Grace"})}),Object(B.jsx)(C.a,{style:vn(i).button,onPress:function(){return d(o)},children:Object(B.jsx)(w.a,{style:vn(i).buttonText,children:"Tent Types"})}),Object(B.jsx)(C.a,{style:vn(i).button,onPress:function(){return d(a)},children:Object(B.jsx)(w.a,{style:vn(i).buttonText,children:"P-Checks"})})]}),Object(B.jsxs)(Z.a,{style:{marginHorizontal:20,marginTop:50},ref:l,showsVerticalScrollIndicator:!1,children:[Object(B.jsx)(w.a,{style:vn(i).header,children:"Tenting Overview:"}),Object(B.jsx)(y.a,{style:{width:"100%",marginBottom:10},children:Object(B.jsx)(T.a,{style:{width:On.width,height:568*s,resizeMode:"contain",alignSelf:"center"},source:gn.a})}),Object(B.jsx)(w.a,{style:vn(i).contentText,children:"A tent is comprised of a maximum of 12 people. Occupancy requirements for each tenting period remain the same regardless of the number of people in the tent."}),Object(B.jsx)(w.a,{style:vn(i).header,onLayout:function(t){var n=t.nativeEvent.layout;e=n.y},children:"Daytime Hours and Curfew"}),Object(B.jsx)(w.a,{style:vn(i).contentText,children:"Tenters on duty must be within the K-Ville city limits at all times. The number of tenters required at a given time varies based on the current tenting period and the time of day."}),Object(B.jsx)(w.a,{style:vn(i).contentText,children:"Each day is divided into day and night hours. A different number of tenters on duty is necessary from day to night."}),Object(B.jsx)(w.a,{style:vn(i).contentText,children:"Night Hours are defined as:"}),Object(B.jsx)(y.a,{style:{marginHorizontal:20},children:Object(B.jsxs)(Et.e,{borderStyle:{borderWidth:1.3},children:[Object(B.jsx)(Et.c,{data:mn.tableHead,flexArr:[1.00001,2,2],style:v.a.flatten(vn(i).tableHead),textStyle:v.a.flatten(vn(i).tableText)}),Object(B.jsxs)(Et.f,{style:vn(i).tableWrapper,children:[Object(B.jsx)(Et.b,{data:mn.tableTitle,style:v.a.flatten(vn(i).tableTitle),heightArr:[28,28],textStyle:v.a.flatten(vn(i).tableText)}),Object(B.jsx)(Et.d,{data:mn.tableData,flexArr:[1.987,1.987],style:v.a.flatten(vn(i).tableRow),textStyle:v.a.flatten(vn(i).tableText)})]})]})}),Object(B.jsx)(w.a,{style:vn(i).contentText,children:"*All other times will count as Day Hours"}),Object(B.jsx)(y.a,{style:{marginVertical:15}}),Object(B.jsx)(w.a,{style:vn(i).header,onLayout:function(e){var n=e.nativeEvent.layout;t=n.y},children:"Tent Checks"}),Object(B.jsx)(w.a,{style:vn(i).contentText,children:"The Line Monitors may announce a tent check at their discretion. A check will be signaled by the sounding of a bullhorn siren."}),Object(B.jsx)(w.a,{style:vn(i).contentText,children:"To check in, gather all members of your tent in the area between the Card parking lot and the Schwartz-Butters plaza. Wait until the required number of tenters are present to check in \u2014 we cannot check in your tent until all required members are present."}),Object(B.jsx)(w.a,{style:vn(i).contentText,children:"Tents who have yet to be checked but appear to be missing will \u2014 at a minimum \u2014 be given three warning calls over the bullhorn before being marked as absent. After the final warning call, an additional 2 minutes will be given to allow for tenters to check in. After this time elapses, the check is officially over."}),Object(B.jsx)(w.a,{style:[vn(i).contentText,{fontWeight:"700"}],children:"Tenters must stay within K-Ville boundaries to be counted."}),Object(B.jsx)(y.a,{style:{width:"100%",marginBottom:10},children:Object(B.jsx)(T.a,{style:{width:On.width,height:568*s,resizeMode:"contain",alignSelf:"center"},source:jn.a})}),Object(B.jsx)(w.a,{style:vn(i).contentText,children:"Line Monitors cannot be held responsible for checks missed due to tenters using the bathroom, failing to hear the siren, being asleep in the tent, or similar related circumstances."}),Object(B.jsx)(y.a,{style:{marginVertical:12}}),Object(B.jsx)(w.a,{style:vn(i).header,onLayout:function(e){var t=e.nativeEvent.layout;n=t.y},children:"Missed Checks"}),Object(B.jsx)(w.a,{style:vn(i).contentText,children:"Checking in entails each present group member presenting their Duke Card to a Line Monitor. If the tent fails to complete this, the check will be counted as a missed check for that tent."}),Object(B.jsx)(w.a,{style:vn(i).contentText,children:"Each tent is allowed one missed check per tenting period. Missing a second check will result in the tent being bumped to the end of the line, behind all registered tents."}),Object(B.jsx)(w.a,{style:vn(i).contentText,children:"An email from headlinemonitor@gmail.com to your tent captain within 24 hours will inform you of your miss. If you feel a miss has been assigned in error, please contact the Head Line Monitors at headlinemonitor@gmail.com to discuss your circumstances."}),Object(B.jsx)(w.a,{style:vn(i).contentText,children:"If K-Ville is at a maximum capacity, the tent will be dropped to the end of the resultant wait list."}),Object(B.jsx)(y.a,{style:{marginVertical:12}}),Object(B.jsx)(w.a,{style:vn(i).header,onLayout:function(e){var t=e.nativeEvent.layout;r=t.y},children:"Grace"}),Object(B.jsx)(w.a,{style:vn(i).contentText,children:"A grace period may be announced in which no tent checks will be called. During grace, tenters need not be on duty in K-Ville."}),Object(B.jsx)(w.a,{style:vn(i).contentText,children:"Grace shall be given on the following occasions:"}),Object(B.jsx)(u,{data:"For one hour after a tent check is completed."}),Object(B.jsx)(u,{data:"Two hours before and after a men\u2019s or women\u2019s home basketball game."}),Object(B.jsx)(u,{data:"One hour before and after a men\u2019s or women\u2019s away basketball game."}),Object(B.jsx)(u,{data:"For some heavy weather-related incidents."}),Object(B.jsx)(y.a,{style:{marginVertical:18}}),Object(B.jsx)(w.a,{style:[vn(i).header,vn(i).tentHeaderBox,{backgroundColor:i.text2,color:i.text1}],onLayout:function(e){var t=e.nativeEvent.layout;o=t.y},children:"Black Tent"}),Object(B.jsx)(w.a,{style:vn(i).contentText,children:"Black Tenting is the first period of the Tenting season. Following the conclusion of Black Tenting, missed checks will clear and all Black Tents will begin following Blue Tenting rules."}),Object(B.jsx)(y.a,{style:{marginHorizontal:20},children:Object(B.jsx)(Et.e,{borderStyle:{borderWidth:1.3},children:Object(B.jsx)(Et.f,{style:vn(i).tableWrapper,children:Object(B.jsx)(Et.d,{data:xn.tableData,flexArr:[1,1.987],style:v.a.flatten(vn(i).tentTableRow),textStyle:v.a.flatten(vn(i).tableText)})})})}),Object(B.jsx)(y.a,{style:{marginVertical:18}}),Object(B.jsx)(w.a,{style:[vn(i).header,vn(i).tentHeaderBox,{backgroundColor:"blue",color:i.text1}],children:"Blue Tent"}),Object(B.jsx)(w.a,{style:vn(i).contentText,children:"Blue Tenting is the second period of the Tenting season. Following the conclusion of Blue Tenting, missed checks will clear and all Black and Blue Tents will begin following White Tenting rules."}),Object(B.jsx)(y.a,{style:{marginHorizontal:20},children:Object(B.jsx)(Et.e,{borderStyle:{borderWidth:1.3},children:Object(B.jsx)(Et.f,{style:vn(i).tableWrapper,children:Object(B.jsx)(Et.d,{data:pn.tableData,flexArr:[1,1.987],style:v.a.flatten(vn(i).tentTableRow),textStyle:v.a.flatten(vn(i).tableText)})})})}),Object(B.jsx)(y.a,{style:{marginVertical:18}}),Object(B.jsx)(w.a,{style:[vn(i).header,vn(i).tentHeaderBox,{backgroundColor:i.text1}],children:"White Tent"}),Object(B.jsx)(w.a,{style:vn(i).contentText,children:"White Tenting is the third period of the Tenting season."}),Object(B.jsx)(w.a,{style:vn(i).contentText,children:"Given the high demand for White tents, the order of White tents will be determined by a scavenger hunt."}),Object(B.jsx)(y.a,{style:{marginHorizontal:20},children:Object(B.jsx)(Et.e,{borderStyle:{borderWidth:1.3},children:Object(B.jsx)(Et.f,{style:vn(i).tableWrapper,children:Object(B.jsx)(Et.d,{data:yn.tableData,flexArr:[1,1.987],style:v.a.flatten(vn(i).tentTableRow),textStyle:v.a.flatten(vn(i).tableText)})})})}),Object(B.jsx)(y.a,{style:{marginVertical:18}}),Object(B.jsx)(w.a,{style:[vn(i).header,vn(i).tentHeaderBox,{backgroundColor:i.grey6}],children:"Flex Tent"}),Object(B.jsx)(w.a,{style:vn(i).contentText,children:"Flex Tenting abides by the same rules and regulations as White Tenting, but Flex tents are NOT GUARANTEED a spot in the Carolina game."}),Object(B.jsx)(w.a,{style:vn(i).contentText,children:"These tenting spots will be filled through the Race to the Secret Spots. The 31st to 60th groups to complete the Race to the Secret Spots will receive Flex Tenting spots."}),Object(B.jsx)(w.a,{style:vn(i).contentText,children:"All groups after the 60th group to complete the Race to the Secret Spots will be added to the Flex Tenting wait list."}),Object(B.jsx)(w.a,{style:vn(i).header,onLayout:function(e){var t=e.nativeEvent.layout;a=t.y},children:"Personal Checks"}),Object(B.jsx)(w.a,{style:vn(i).contentText,children:"P-Checks are conducted on an individual basis. Therefore, an entire tent will not be penalized should a member of their tent miss too many Personal Checks."}),Object(B.jsx)(w.a,{style:vn(i).contentText,children:"Five Personal Checks will be called at any time on **insert date**"}),Object(B.jsx)(w.a,{style:[vn(i).contentText,{fontWeight:"700"}],children:"To obtain a wristband for the Carolina game, a tenter must check in at THREE of the FIVE checks."}),Object(B.jsx)(w.a,{style:vn(i).contentText,children:"Individuals who fail to report to three of the five Personal Checks will be ineligible to receive a wristband for the Carolina game. Those students will not, however, penalize the other members in their tent"})]})]})}var vn=function(e){return v.a.create({container:{flex:1,backgroundColor:e.background,flexDirection:"column"},buttonContainer:{flex:1,flexDirection:"row",justifyContent:"space-between",width:"100%"},button:{backgroundColor:e.primary,width:On.width/6,height:50,alignItems:"center",justifyContent:"center"},buttonText:{fontWeight:"500",textAlign:"center",color:e.text1},header:{marginVertical:10,marginHorizontal:15,fontSize:28,fontWeight:"700"},contentText:{fontSize:18,fontWeight:"400",marginHorizontal:24,marginVertical:10,color:e.text2},tentHeaderBox:{width:"",height:40,borderRadius:20,textAlign:"center"},tableHead:{height:40,backgroundColor:"lavender"},tableWrapper:{flexDirection:"row"},tableTitle:{flex:1,backgroundColor:"lavender"},tableRow:{height:28},tableText:{fontSize:12,fontWeight:"500",textAlign:"center"},tentTableRow:{height:95}})},Cn=n(160),Sn={0:"AM",1:"PM"},Tn={0:"00",1:"30"},kn={"Morning Shift":"#FDF1DB","Afternoon Shift":"#FCEBE5","Night Shift":"#E5DBFF"};function In(e){var t=e.navigation,n=Object(d.c)((function(e){return e.user.currGroupCode})),r=Object(c.useState)(!1),a=o()(r,2),s=(a[0],a[1],Object(c.useState)(!1)),l=o()(s,2),u=(l[0],l[1],Object(c.useState)(!1)),h=o()(u,2),b=h[0],f=h[1],g=D().theme,m=Object(c.useRef)(),x=Object(j.d)(["shifts",p.a.auth().currentUser.uid,n],(function(){return function(e){var t,n,r,o,a;return i.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,i.a.awrap(p.a.firestore().collection("groups").doc(e).collection("members").doc(p.a.auth().currentUser.uid).get().then((function(e){m.current=e.data().shifts})));case 2:for(t=[{title:"Sunday",data:[]},{title:"Monday",data:[]},{title:"Tuesday",data:[]},{title:"Wednesday",data:[]},{title:"Thursday",data:[]},{title:"Friday",data:[]},{title:"Saturday",data:[]}],n=0;n<m.current.length;n++)if(m.current[n]){for(r=n,o=Math.floor(r/48);n<m.current.length&&m.current[n];)n++;a=n-1,t[o].data.push({start:r,end:a})}return c.abrupt("return",t);case 5:case"end":return c.stop()}}),null,null,null,Promise)}(n)}),{initialData:[],onSuccess:function(){return f(!0)}}),O=x.isLoading,v=x.isError,C=(x.error,x.data),S=_e(x.refetch),k=S.isRefetchingByUser,R=S.refetchByUser;!function(e){var t=Object(j.e)();Object(j.c)((function(e){return function(e){for(var t=e.item,n=e.groupCode,r=m.current,o=t.start;o<=t.end;o++)r[o]=!1;p.a.firestore().collection("groups").doc(n).collection("members").doc(p.a.auth().currentUser.uid).update({shifts:r});var a=C;return a.splice(t.id,1),a}(e)}),{onError:function(e){},onSuccess:function(n){t.setQueryData(["shifts",p.a.auth().currentUser.uid,e],n)}})}(n);return O||!b?Object(B.jsx)(Ne,{}):v?Object(B.jsx)(Me,{navigation:t}):function(e){for(var t=0;t<e.length;t++)if(0!=e[t].data.length)return!1;return!0}(C)?Object(B.jsxs)(y.a,{style:{flex:1,justifyContent:"center",alignItems:"center",paddingBottom:"30%",backgroundColor:g.background},children:[Object(B.jsx)(w.a,{children:"No Shifts have been assigned to you"}),Object(B.jsx)(T.a,{style:{opacity:.5},source:on.a})]}):Object(B.jsx)(y.a,{style:Rn(g).screenContainer,children:Object(B.jsx)(Cn.a,{sections:C,keyExtractor:function(e,t){return e+t},renderItem:function(e){var t=e.item,n=Math.floor(t.start/48),r=t.start-48*n,o=Math.floor(r/24),a=0==Math.floor((r-24*o)/2)?12:Math.floor((r-24*o)/2),i=r%2,c=Math.floor(t.end/48),s=t.end-48*c,l=Math.floor(s/24),u=0==Math.floor((s-24*l)/2)?12:Math.floor((s-24*l)/2),d=s%2,h=a>6&&0==o?"Morning Shift":a>0&&a<=5&&1==o?"Afternoon Shift":"Night Shift";return Object(B.jsxs)(y.a,{style:[Rn(g).listItem,Rn(g).shadowProp,{backgroundColor:kn[h]}],children:[Object(B.jsxs)(y.a,{style:{flexDirection:"row",width:"100%",alignItems:"center",height:"60%"},children:[Object(B.jsx)(I.default,{name:"clock-outline",color:g.grey1,size:20}),Object(B.jsxs)(w.a,{style:Rn(g).timeText,children:[a," : ",Tn[i]," ",Sn[o]," - ",u," : ",Tn[d]," ",Sn[l]]})]}),Object(B.jsx)(y.a,{style:{borderTopWidth:1,width:"100%",height:"40%",justifyContent:"center"},children:Object(B.jsx)(w.a,{style:Rn(g).listText,children:h})})]})},renderSectionHeader:function(e){var t=e.section,n=t.title;return 0!=t.data.length?Object(B.jsx)(w.a,{style:Rn(g).sectionHeader,children:n}):null},renderSectionFooter:function(){return Object(B.jsx)(y.a,{style:{marginBottom:10}})},refreshControl:Object(B.jsx)(ke.a,{enabled:!0,refreshing:k,onRefresh:R}),showsVerticalScrollIndicator:!1,stickySectionHeadersEnabled:!1})})}var Rn=function(e){return v.a.create({screenContainer:{flex:1,backgroundColor:e.background},listItem:{flexDirection:"column",alignItems:"start",padding:8,marginVertical:7,borderRadius:10,alignSelf:"center",width:"90%",height:90},listText:{fontSize:15,fontWeight:"400",color:e.grey1},timeText:{color:e.grey1,textAlign:"center",marginLeft:10,fontSize:15,fontWeight:"500"},sectionHeader:{fontSize:24,marginLeft:"6%",marginTop:10,color:e.grey1},shadowProp:{shadowColor:"#171717",shadowOffset:{width:-2,height:4},shadowOpacity:.2,shadowRadius:5,elevation:20}})},Pn=n(108),Bn=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.snackbar.snackbarOpen})),n=Object(d.c)((function(e){return e.snackbar.snackbarMessage})),r=D().theme;return Object(B.jsx)(Pn.a,{onPress:function(){return e(M())},children:Object(B.jsx)(Ot.a,{visible:t,onDismiss:function(){return e(M())},wrapperStyle:{top:0},duration:2e3,elevation:5,children:Object(B.jsx)(w.a,{style:{textAlign:"center",color:r.text1},children:n})})})};function zn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Dn=Object($.a)();function Wn(){var e=Object(c.useState)(!1),t=o()(e,2),n=t[0],r=t[1],a=Object(c.useState)(),l=o()(a,2),u=l[0],b=l[1],j=Object(c.useState)(!1),g=o()(j,2),m=g[0],x=g[1],O=Object(c.useState)(!1),v=o()(O,2),S=v[0],T=v[1],k=D().theme,R=Object(d.b)();function P(){x(!m)}function z(){T(!S)}var W=function(){return Object(B.jsxs)(y.a,{style:{flex:1,paddingBottom:20},children:[Object(B.jsx)(w.a,{style:An(k).InfoText,children:"This page is for your availability throughout the week. You will input what times of the week you are not available for tenting."}),Object(B.jsx)(w.a,{style:An(k).InfoText,children:"To do so, click the add button on the bottom right to add a new busy time and input the day, start time, and end time."}),Object(B.jsx)(w.a,{style:An(k).InfoText,children:"Do this for your entire weekly schedule. You can delete blocks to edit your times."}),Object(B.jsx)(w.a,{style:An(k).InfoText,children:"This schedule remains saved from week to week, but you may edit every week if you have changes to your schedule."}),Object(B.jsx)(w.a,{style:An(k).InfoText,children:"Make sure to fill out your availability every week before you Create a New Group Schedule or your busy times will not be accounted for in the group schedule."}),Object(B.jsx)(w.a,{style:An(k).InfoText,children:"NOTE: If you mark yourself as available at 1am on a day, you will be marked availabile for the whole noght shift from 1am to 7am"})]})},A=function(){return Object(B.jsxs)(y.a,{style:{flex:1,paddingBottom:20},children:[Object(B.jsx)(w.a,{style:An(k).InfoText,children:"This page is for your group schedule for the week (from Sunday to Saturday midnight)."}),Object(B.jsx)(w.a,{style:An(k).InfoText,children:"Groups should aim to create a new weekly schedule every week after members fill out their availability for that week."}),Object(B.jsx)(w.a,{style:An(k).InfoText,children:"Once all members of the group have filled out their availability for the week, an admin should create a new group schedule."}),Object(B.jsx)(w.a,{style:An(k).InfoText,children:"After the schedule is made, admins can make edits by clicking on the time slot and changing the member for that time."})]})};return Object(c.useEffect)((function(){var e=!0;p.a.firestore().collection("users").doc(p.a.auth().currentUser.uid).get().then((function(t){e&&t.exists&&R(je(t.data()))})).then((function(){})).catch((function(e){}));return n||function(){var e,t;i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i.a.awrap(ee.a.getInitialURL());case 3:if(n.sent,"web"===h.a.OS){n.next=10;break}return n.next=7,i.a.awrap(Q.a.getItem("NAVIGATION_STATE_V1"));case 7:e=n.sent,void 0!==(t=e?JSON.parse(e):void 0)&&b(t);case 10:return n.prev=10,r(!0),n.finish(10);case 13:case"end":return n.stop()}}),null,null,[[0,,10,13]],Promise)}(),function(){return e=!1}}),[n]),n?Object(B.jsx)(y.a,{style:{flex:1,zIndex:1},children:Object(B.jsxs)(s.a,{initialState:u,onStateChange:function(e){Q.a.setItem("NAVIGATION_STATE_V1",JSON.stringify(e))},children:[Object(B.jsxs)(Dn.Navigator,{initialRouteName:"Start",drawerContent:function(e){return Object(B.jsx)(Wt,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zn(Object(n),!0).forEach((function(t){Y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},screenOptions:{drawerType:"front"},children:[Object(B.jsx)(Dn.Screen,{name:"Home",component:Je,options:{headerShown:!1,swipeEnabled:!1}}),Object(B.jsx)(Dn.Screen,{name:"CreateGroup",component:rt,options:{headerShown:!1,swipeEnabled:!1}}),Object(B.jsx)(Dn.Screen,{name:"StackNavigator",component:Se,options:{headerShown:!1,swipeEnabled:!1}}),Object(B.jsx)(Dn.Screen,{name:"JoinGroup",component:ct,options:{headerShown:!1,swipeEnabled:!1}}),Object(B.jsx)(Dn.Screen,{name:"GroupInfo",component:St,options:{headerShown:!1,swipeEnabled:!0}}),Object(B.jsx)(Dn.Screen,{name:"AvailabilityScreen",component:Jt,options:function(e){var t=e.navigation;return{title:"Availability",headerStyle:{backgroundColor:k.primaryContainer,borderBottomWidth:0,shadowColor:"transparent"},headerLeft:function(){return Object(B.jsx)(te.a,{icon:"menu",size:25,onPress:function(){return t.openDrawer()}})},headerRight:function(){return Object(B.jsxs)(y.a,{children:[Object(B.jsx)(C.a,{onPress:function(){P()},style:{marginRight:20},children:Object(B.jsx)(I.default,{name:"help-circle-outline",color:"black",size:25})}),Object(B.jsxs)(Ge,{isVisible:m,onBackdropPress:P,swipeDown:!1,height:350,userStyle:"light",children:[Object(B.jsxs)(y.a,{style:An(k).popUpHeaderView,children:[Object(B.jsxs)(y.a,{style:{flexDirection:"row"},children:[Object(B.jsx)(I.default,{name:"lightbulb",color:k.grey2,size:40,style:{marginRight:15}}),Object(B.jsxs)(y.a,{children:[Object(B.jsx)(w.a,{style:{fontWeight:"500"},children:"Helpful Tips"}),Object(B.jsx)(w.a,{style:{fontSize:15,fontWeight:"700"},children:"How to use the Availability Page"})]})]}),Object(B.jsx)(C.a,{onPress:P,children:Object(B.jsx)(I.default,{name:"close-circle",color:k.grey2,size:32,style:{marginTop:4}})})]}),Object(B.jsx)(Z.a,{showsVerticalScrollIndicator:!1,style:An(k).textView,scrollToOverflowEnabled:!0,children:Object(B.jsx)(W,{})}),Object(B.jsx)(y.a,{style:{height:"13%",width:"100%",justifyContent:"center",alignItems:"center"},children:Object(B.jsx)(C.a,{onPress:P,style:An(k).closeBtn,children:Object(B.jsx)(w.a,{style:{color:k.text1,fontSize:20,fontWeight:"600"},children:"Ok"})})})]})]})}}}}),Object(B.jsx)(Dn.Screen,{name:"ShiftsScreen",component:In,options:function(e){var t=e.navigation;return{title:"Shifts This Week",headerStyle:{backgroundColor:k.primaryContainer,borderBottomWidth:0,shadowColor:"#171717",shadowOffset:{width:-2,height:4},shadowOpacity:.2,shadowRadius:5,elevation:20},headerLeft:function(){return Object(B.jsx)(te.a,{icon:"menu",size:25,onPress:function(){return t.openDrawer()}})}}}}),Object(B.jsx)(Dn.Screen,{name:"ScheduleScreen",component:un,options:function(e){var t=e.navigation;return{title:"Group Schedule",headerStyle:{backgroundColor:k.primaryContainer,borderBottomWidth:0,shadowColor:"transparent"},headerLeft:function(){return Object(B.jsx)(te.a,{icon:"menu",size:25,onPress:function(){return t.openDrawer()}})},headerRight:function(){return Object(B.jsxs)(y.a,{children:[Object(B.jsx)(C.a,{onPress:function(){z()},style:{marginRight:20},children:Object(B.jsx)(I.default,{name:"help-circle-outline",color:"black",size:25})}),Object(B.jsxs)(Ge,{isVisible:S,onBackdropPress:z,swipeDown:!1,height:350,userStyle:"light",children:[Object(B.jsxs)(y.a,{style:An(k).popUpHeaderView,children:[Object(B.jsxs)(y.a,{style:{flexDirection:"row"},children:[Object(B.jsx)(I.default,{name:"lightbulb",color:k.grey2,size:40,style:{marginRight:15}}),Object(B.jsxs)(y.a,{children:[Object(B.jsx)(w.a,{style:{fontWeight:"500"},children:"Helpful Tips"}),Object(B.jsx)(w.a,{style:{fontSize:16,fontWeight:"700"},children:"How to use the Schedule Page"})]})]}),Object(B.jsx)(C.a,{onPress:z,children:Object(B.jsx)(I.default,{name:"close-circle",color:k.grey2,size:32,style:{marginTop:4}})})]}),Object(B.jsx)(Z.a,{showsVerticalScrollIndicator:!1,style:An(k).textView,scrollToOverflowEnabled:!0,children:Object(B.jsx)(A,{})}),Object(B.jsx)(y.a,{style:{height:"13%",width:"100%",justifyContent:"center",alignItems:"center"},children:Object(B.jsx)(C.a,{onPress:z,style:An(k).closeBtn,children:Object(B.jsx)(w.a,{style:{color:k.text1,fontSize:20,fontWeight:"600"},children:"Ok"})})})]})]})}}}}),Object(B.jsx)(Dn.Screen,{name:"MonitorScreen",component:hn,options:function(e){var t=e.navigation;return{title:"",headerStyle:{backgroundColor:k.primaryContainer,borderBottomWidth:0,shadowColor:"transparent"},headerLeft:function(){return Object(B.jsx)(te.a,{icon:"menu",size:25,onPress:function(){return t.openDrawer()}})}}}}),Object(B.jsx)(Dn.Screen,{name:"InfoScreen",component:wn,options:function(e){var t=e.navigation;return{title:"Tenting Information",headerStyle:{backgroundColor:k.primaryContainer,borderBottomWidth:0,shadowColor:"transparent"},headerLeft:function(){return Object(B.jsx)(te.a,{icon:"menu",size:25,onPress:function(){return t.openDrawer()}})}}}})]}),Object(B.jsx)(f.a,{style:"dark"}),Object(B.jsx)(Bn,{})]})}):null}var An=function(e){return v.a.create({popUpHeaderView:{flexDirection:"row",height:"18%",width:"94%",marginTop:"2%",justifyContent:"space-between",alignItems:"center"},textView:{height:"80%",width:"94%",backgroundColor:"#f3f3f3",borderRadius:18,paddingVertical:10,paddingHorizontal:15},InfoText:{color:e.text2,marginVertical:5,textAlign:"left",fontSize:16},closeBtn:{flexDirection:"row",height:"70%",width:"70%",backgroundColor:"#3B65A2",alignItems:"center",justifyContent:"center",borderRadius:15},headerContainer:{flexDirection:"row",width:"90%",justifyContent:"space-between",marginBottom:15},headerText:{fontSize:20,fontWeight:"700",color:e.grey2},textInput:{backgroundColor:e.white2,paddingVertical:10,paddingHorizontal:15,width:"90%",fontSize:18,fontWeight:"500",textAlign:"left",borderRadius:15,marginBottom:23,borderColor:e.grey2}})};function En(e){var t=e.navigation,n=Object(c.useState)(""),r=o()(n,2),a=r[0],s=r[1],l=D().theme;return Object(B.jsx)(re.a,{style:Nn(l).container,children:Object(B.jsxs)(y.a,{style:Nn(l).formCenter,children:[Object(B.jsx)(w.a,{children:"Forgot Password?"}),Object(B.jsxs)(y.a,{style:Nn(l).section,children:[Object(B.jsx)(y.a,{style:Nn(l).icon,children:Object(B.jsx)(I.default,{name:"email-outline",color:l.icon2,size:25})}),Object(B.jsx)(O.a,{style:Nn(l).textInput,placeholder:"Enter email",value:a,onChangeText:function(e){return s(e)},keyboardType:"email-address"})]}),Object(B.jsx)(C.a,{style:Nn(l).button,onPress:function(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.awrap(p.a.auth().sendPasswordResetEmail(a).then((function(){t.navigate("Login")})).catch((function(e){})));case 2:case"end":return e.stop()}}),null,null,null,Promise)},children:Object(B.jsx)(w.a,{style:{color:l.text1},children:"Send Email"})})]})})}var Nn=function(e){return v.a.create({container:{flex:1,backgroundColor:e.white2},formCenter:{justifyContent:"center",flex:1,margin:25},section:{flexDirection:"row",alignItems:"center",backgroundColor:e.white2,height:40,borderRadius:20,margin:10,shadowColor:e.primary,elevation:20,shadowOffset:{width:0,height:4},shadowOpacity:.3,shadowRadius:7},icon:{position:"absolute",left:-10,height:50,width:50,borderRadius:100,alignItems:"center",justifyContent:"center",backgroundColor:e.white2,shadowColor:e.primary,elevation:20,shadowOffset:{width:0,height:4},shadowOpacity:.3,shadowRadius:7},textInput:{marginLeft:50,flexDirection:"row",flex:1,backgroundColor:e.white2,padding:10,borderRadius:20,height:"100%"},button:{alignItems:"center",justifyContent:"center",flexDirection:"row",width:"100%",backgroundColor:e.primary,height:30,marginTop:40,borderRadius:50}})},Mn=n(89),Vn=n(276),Un=n(193),Ln=Object(Mn.b)({user:Oe,snackbar:U}),Hn={key:"root",storage:Q.a},Gn=Object(Vn.a)(Hn,Ln),Fn=Object(A.a)({reducer:Gn,middleware:[Un.a]}),_n=Object(Vn.b)(Fn);0===p.a.apps.length&&p.a.initializeApp({apiKey:"AIzaSyDEFvAO5nl5XlW7WcGcDCrFGo4QEZFuWq0",authDomain:"duke-tenting-app-cc15b.firebaseapp.com",databaseURL:"https://duke-tenting-app-cc15b-default-rtdb.firebaseio.com",projectId:"duke-tenting-app-cc15b",storageBucket:"duke-tenting-app-cc15b.appspot.com",messagingSenderId:"391061238630",appId:"1:391061238630:web:85fbc00e4babf43cdc8ea7",measurementId:"G-6QNGDGFLHZ"});var Qn=Object(l.a)(),qn=new j.a;function Jn(){var e=Object(c.useState)({isReady:!1}),t=o()(e,2),n=t[0],r=t[1];function a(e){var t,n,r;return i.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(null==(t=p.a.auth().currentUser.uid)){o.next=5;break}return o.next=4,i.a.awrap(p.a.firestore().collection("users").doc(t).get().then((function(e){n=e.data().groupCode})).catch((function(e){})));case 4:for(r=0;r<n.length;r++)p.a.firestore().collection("groups").doc(n[r].groupCode).collection("members").doc(t).update({inTent:e}).catch((function(e){}));case 5:case"end":return o.stop()}}),null,null,null,Promise)}x.a("KVILLE",(function(e){var t=e.data,r=t.eventType;t.region;e.error||(r===g.b.Enter?n.loggedIn&&a(!0):r===g.b.Exit&&n.loggedIn&&a(!1))})),Object(c.useEffect)((function(){var e=!0;return"web"!==h.a.OS&&function(){var e,t;i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(m.b());case 2:if(e=n.sent,"granted"===e.status){n.next=8;break}return n.abrupt("return");case 8:return n.next=10,i.a.awrap(m.a());case 10:if(t=n.sent,"granted"===t.status){n.next=16;break}return n.abrupt("return");case 16:m.c("KVILLE",[{latitude:35.997435,longitude:-78.940823,radius:150}]);case 17:case"end":return n.stop()}}),null,null,null,Promise)}(),e&&i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.awrap(u.b());case 3:p.a.auth().onAuthStateChanged((function(e){r(e?{isReady:!0,loggedIn:!0}:{isReady:!0,loggedIn:!1})})),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),null,null,[[0,6]],Promise),function(){return e=!1}}),[]);var l=Object(c.useCallback)((function(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isReady){e.next=3;break}return e.next=3,i.a.awrap(u.a());case 3:case"end":return e.stop()}}),null,null,null,Promise)}),[n.isReady]);return n.isReady?n.loggedIn?Object(B.jsx)(j.b,{client:qn,children:Object(B.jsx)(d.a,{store:Fn,children:Object(B.jsx)(b.a,{loading:null,persistor:_n,children:Object(B.jsx)(W,{children:Object(B.jsx)(Wn,{})})})})}):Object(B.jsx)(d.a,{store:Fn,children:Object(B.jsx)(b.a,{loading:null,persistor:_n,children:Object(B.jsx)(W,{children:Object(B.jsxs)(s.a,{onReady:l,children:[Object(B.jsxs)(Qn.Navigator,{initialRouteName:"Login",children:[Object(B.jsx)(Qn.Screen,{name:"Register",component:F,options:{headerShown:!1}}),Object(B.jsx)(Qn.Screen,{name:"Login",component:J,options:{headerShown:!1}}),Object(B.jsx)(Qn.Screen,{name:"ForgotPassword",component:En,options:function(e){e.navigation;return{title:"",headerStyle:{backgroundColor:"#f6f6f6",borderBottomWidth:0,shadowColor:"transparent"},headerTitleStyle:{fontSize:28}}}})]}),Object(B.jsx)(f.a,{style:"light"}),Object(B.jsx)(Bn,{})]})})})}):null}},403:function(e,t,n){e.exports=n(565)}},[[403,1,2]]]);
//# sourceMappingURL=app.3dc23699.chunk.js.map